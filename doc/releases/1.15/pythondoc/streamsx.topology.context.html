

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>streamsx.topology.context &mdash; streamsx 1.15.4 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="streamsx.topology.schema" href="streamsx.topology.schema.html" />
    <link rel="prev" title="streamsx.topology.topology" href="streamsx.topology.topology.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> streamsx
          

          
          </a>

          
            
            
              <div class="version">
                1.15
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="streamsx.topology.html">streamsx.topology</a></li>
<li class="toctree-l1"><a class="reference internal" href="streamsx.topology.topology.html">streamsx.topology.topology</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">streamsx.topology.context</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-contents">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="streamsx.topology.schema.html">streamsx.topology.schema</a></li>
<li class="toctree-l1"><a class="reference internal" href="streamsx.topology.state.html">streamsx.topology.state</a></li>
<li class="toctree-l1"><a class="reference internal" href="streamsx.topology.composite.html">streamsx.topology.composite</a></li>
<li class="toctree-l1"><a class="reference internal" href="streamsx.topology.tester.html">streamsx.topology.tester</a></li>
<li class="toctree-l1"><a class="reference internal" href="streamsx.topology.tester_runtime.html">streamsx.topology.tester_runtime</a></li>
<li class="toctree-l1"><a class="reference internal" href="streamsx.ec.html">streamsx.ec</a></li>
<li class="toctree-l1"><a class="reference internal" href="streamsx.spl.op.html">streamsx.spl.op</a></li>
<li class="toctree-l1"><a class="reference internal" href="streamsx.spl.types.html">streamsx.spl.types</a></li>
<li class="toctree-l1"><a class="reference internal" href="streamsx.spl.toolkit.html">streamsx.spl.toolkit</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="streamsx.spl.spl.html">streamsx.spl.spl</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="streamsx.build.html">streamsx.build</a></li>
<li class="toctree-l1"><a class="reference internal" href="streamsx.rest.html">streamsx.rest</a></li>
<li class="toctree-l1"><a class="reference internal" href="streamsx.rest_primitives.html">streamsx.rest_primitives</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="scripts/extract.html">spl-python-extract</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/info.html">streamsx-info</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/runner.html">streamsx-runner</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/sc.html">streamsx-sc</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/service.html">streamsx-service</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/streamtool.html">streamsx-streamtool</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="service.html">IBM Streaming Analytics service</a></li>
<li class="toctree-l1"><a class="reference internal" href="pysetup.html">IBM Streams Python setup</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="restrictions.html">Restrictions and known bugs</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">streamsx</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>streamsx.topology.context</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/streamsx.topology.context.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-streamsx.topology.context">
<span id="streamsx-topology-context"></span><h1>streamsx.topology.context<a class="headerlink" href="#module-streamsx.topology.context" title="Permalink to this headline">¶</a></h1>
<p>Context for submission and build of topologies.</p>
<div class="section" id="module-contents">
<h2>Module contents<a class="headerlink" href="#module-contents" title="Permalink to this headline">¶</a></h2>
<p class="rubric">Functions</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#streamsx.topology.context.build" title="streamsx.topology.context.build"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build</span></code></a></p></td>
<td><p>Build a topology to produce a Streams application bundle.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#streamsx.topology.context.run" title="streamsx.topology.context.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a></p></td>
<td><p>Run a topology in a distributed Streams instance.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#streamsx.topology.context.submit" title="streamsx.topology.context.submit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">submit</span></code></a></p></td>
<td><p>Submits a <cite>Topology</cite> (application) using the specified context type.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Classes</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#streamsx.topology.context.ConfigParams" title="streamsx.topology.context.ConfigParams"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ConfigParams</span></code></a></p></td>
<td><p>Configuration options which may be used as keys in <a class="reference internal" href="#streamsx.topology.context.submit" title="streamsx.topology.context.submit"><code class="xref py py-func docutils literal notranslate"><span class="pre">submit()</span></code></a> <cite>config</cite> parameter.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#streamsx.topology.context.ContextTypes" title="streamsx.topology.context.ContextTypes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ContextTypes</span></code></a></p></td>
<td><p>Submission context types.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#streamsx.topology.context.JobConfig" title="streamsx.topology.context.JobConfig"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JobConfig</span></code></a></p></td>
<td><p>Job configuration.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#streamsx.topology.context.SubmissionResult" title="streamsx.topology.context.SubmissionResult"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SubmissionResult</span></code></a></p></td>
<td><p>Passed back to the user after a call to submit.</p></td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="streamsx.topology.context.ContextTypes">
<em class="property">class </em><code class="sig-prename descclassname">streamsx.topology.context.</code><code class="sig-name descname">ContextTypes</code><a class="headerlink" href="#streamsx.topology.context.ContextTypes" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Submission context types.</p>
<p>A <a class="reference internal" href="streamsx.topology.topology.html#streamsx.topology.topology.Topology" title="streamsx.topology.topology.Topology"><code class="xref py py-class docutils literal notranslate"><span class="pre">Topology</span></code></a> is submitted using <a class="reference internal" href="#streamsx.topology.context.submit" title="streamsx.topology.context.submit"><code class="xref py py-func docutils literal notranslate"><span class="pre">submit()</span></code></a> and a context type.
Submision of a <cite>Topology</cite> generally builds the application into a Streams application
bundle (sab) file and then submits it for execution in the required context.</p>
<p>The Streams application bundle contains all the artifacts required by an application such
that it can be executed remotely (e.g. on a Streaming Analytics service), including
distributing the execution of the application across multiple resources (hosts).</p>
<p>The context type defines which context is used for submission.</p>
<p>The main context types result in a running application and are:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#streamsx.topology.context.ContextTypes.STREAMING_ANALYTICS_SERVICE" title="streamsx.topology.context.ContextTypes.STREAMING_ANALYTICS_SERVICE"><code class="xref py py-const docutils literal notranslate"><span class="pre">STREAMING_ANALYTICS_SERVICE</span></code></a> - Application is submitted to a Streaming Analytics service running on IBM Cloud.</p></li>
<li><p><a class="reference internal" href="#streamsx.topology.context.ContextTypes.DISTRIBUTED" title="streamsx.topology.context.ContextTypes.DISTRIBUTED"><code class="xref py py-const docutils literal notranslate"><span class="pre">DISTRIBUTED</span></code></a> - Application is submitted to an IBM Streams instance.</p></li>
<li><p><a class="reference internal" href="#streamsx.topology.context.ContextTypes.STANDALONE" title="streamsx.topology.context.ContextTypes.STANDALONE"><code class="xref py py-const docutils literal notranslate"><span class="pre">STANDALONE</span></code></a> - Application is executed as a local process, IBM Streams <cite>standalone</cite> application. Typically this is used during development or testing.</p></li>
</ul>
</div></blockquote>
<p>The <a class="reference internal" href="#streamsx.topology.context.ContextTypes.BUNDLE" title="streamsx.topology.context.ContextTypes.BUNDLE"><code class="xref py py-const docutils literal notranslate"><span class="pre">BUNDLE</span></code></a> context type compiles the application (<cite>Topology</cite>) to produce a
Streams application bundle (sab file). The bundle is not executed but may subsequently be submitted
to a Streaming Analytics service or an IBM Streams instance. A bundle may be submitted multiple
times to services or instances, each resulting in a unique job (running application).</p>
<dl class="attribute">
<dt id="streamsx.topology.context.ContextTypes.BUILD_ARCHIVE">
<code class="sig-name descname">BUILD_ARCHIVE</code><em class="property"> = 'BUILD_ARCHIVE'</em><a class="headerlink" href="#streamsx.topology.context.ContextTypes.BUILD_ARCHIVE" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a build archive.</p>
<p>This context type produces the intermediate code archive used for bundle creation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><cite>BUILD_ARCHIVE</cite> is typically only used when diagnosing issues with bundle generation.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="streamsx.topology.context.ContextTypes.BUNDLE">
<code class="sig-name descname">BUNDLE</code><em class="property"> = 'BUNDLE'</em><a class="headerlink" href="#streamsx.topology.context.ContextTypes.BUNDLE" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Streams application bundle.</p>
<p>The <cite>Topology</cite> is compiled to produce Streams application bundle (sab file).</p>
<dl class="simple">
<dt>The resultant application can be submitted to:</dt><dd><ul class="simple">
<li><p>Streaming Analytics service using the Streams console or the Streaming Analytics REST api.</p></li>
<li><p>IBM Streams instance using the Streams console, JMX api or command line <code class="docutils literal notranslate"><span class="pre">streamtool</span> <span class="pre">submitjob</span></code>.</p></li>
<li><p>Executed standalone for development or testing.</p></li>
</ul>
</dd>
</dl>
<p>The bundle must be built on the same operating system version and architecture as the intended running
environment. For Streaming Analytics service this is currently RedHat/CentOS 7 and <cite>x86_64</cite> architecture.</p>
<p class="rubric">IBM Cloud Pak for Data integated configuration</p>
<p><em>Projects (within cluster)</em></p>
<p>The <cite>Topology</cite> is compiled using the Streams build service for
a Streams service instance running in the same Cloud Pak for
Data cluster as the Jupyter notebook or script declaring the application.</p>
<p>The instance is specified in the configuration passed into <a class="reference internal" href="#streamsx.topology.context.submit" title="streamsx.topology.context.submit"><code class="xref py py-func docutils literal notranslate"><span class="pre">submit()</span></code></a>. The code that selects a service instance by name is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">icpd_core</span> <span class="k">import</span> <span class="n">icpd_util</span>
<span class="n">cfg</span> <span class="o">=</span> <span class="n">icpd_util</span><span class="o">.</span><span class="n">get_service_instance_details</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;instanceName&#39;</span><span class="p">,</span> <span class="n">instance_type</span><span class="o">=</span><span class="s2">&quot;streams&quot;</span><span class="p">)</span>

<span class="n">topo</span> <span class="o">=</span> <span class="n">Topology</span><span class="p">()</span>
<span class="o">...</span>
<span class="n">submit</span><span class="p">(</span><span class="n">ContextTypes</span><span class="o">.</span><span class="n">BUNDLE</span><span class="p">,</span> <span class="n">topo</span><span class="p">,</span> <span class="n">cfg</span><span class="p">)</span>
</pre></div>
</div>
<p>The resultant <cite>cfg</cite> dict may be augmented with other values such as
keys from <a class="reference internal" href="#streamsx.topology.context.ConfigParams" title="streamsx.topology.context.ConfigParams"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigParams</span></code></a>.</p>
<p><em>External to cluster or project</em></p>
<p>The <cite>Topology</cite> is compiled using the Streams build service for a Streams service instance running in Cloud Pak for Data.</p>
<dl class="simple">
<dt>Environment variables:</dt><dd><p>These environment variables define how the application is built and submitted.</p>
<ul class="simple">
<li><p><strong>CP4D_URL</strong> - Cloud Pak for Data deployment URL, e.g. <cite>https://cp4d_server:31843</cite></p></li>
<li><p><strong>STREAMS_INSTANCE_ID</strong> - Streams service instance name.</p></li>
<li><p><strong>STREAMS_USERNAME</strong> - (optional) User name to submit the job as, defaulting to the current operating system user name.</p></li>
<li><p><strong>STREAMS_PASSWORD</strong> - Password for authentication.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">IBM Cloud Pak for Data standalone configuration</p>
<p>The <cite>Topology</cite> is compiled using the Streams build service.</p>
<dl class="simple">
<dt>Environment variables:</dt><dd><p>These environment variables define how the application is built.</p>
<ul class="simple">
<li><p><strong>STREAMS_BUILD_URL</strong> - Streams build service URL, e.g. when the service is exposed as node port: <cite>https://&lt;NODE-IP&gt;:&lt;NODE-PORT&gt;</cite></p></li>
<li><p><strong>STREAMS_USERNAME</strong> - (optional) User name to submit the job as, defaulting to the current operating system user name.</p></li>
<li><p><strong>STREAMS_PASSWORD</strong> - Password for authentication.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">IBM Streams on-premise 4.2 &amp; 4.3</p>
<p>The <cite>Topology</cite> is compiled using a local IBM Streams installation.</p>
<dl class="simple">
<dt>Environment variables:</dt><dd><p>These environment variables define how the application is built.</p>
<ul class="simple">
<li><p><strong>STREAMS_INSTALL</strong> - Location of a local IBM Streams installation.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="streamsx.topology.context.ContextTypes.DISTRIBUTED">
<code class="sig-name descname">DISTRIBUTED</code><em class="property"> = 'DISTRIBUTED'</em><a class="headerlink" href="#streamsx.topology.context.ContextTypes.DISTRIBUTED" title="Permalink to this definition">¶</a></dt>
<dd><p>Submission to an IBM Streams instance.</p>
<p class="rubric">IBM Cloud Pak for Data integated configuration</p>
<p><em>Projects (within cluster)</em></p>
<p>The <cite>Topology</cite> is compiled using the Streams build service and submitted
to an Streams service instance running in the same Cloud Pak for
Data cluster as the Jupyter notebook or script declaring the application.</p>
<p>The instance is specified in the configuration passed into <a class="reference internal" href="#streamsx.topology.context.submit" title="streamsx.topology.context.submit"><code class="xref py py-func docutils literal notranslate"><span class="pre">submit()</span></code></a>. The code that selects a service instance by name is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">icpd_core</span> <span class="k">import</span> <span class="n">icpd_util</span>
<span class="n">cfg</span> <span class="o">=</span> <span class="n">icpd_util</span><span class="o">.</span><span class="n">get_service_instance_details</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;instanceName&#39;</span><span class="p">,</span> <span class="n">instance_type</span><span class="o">=</span><span class="s2">&quot;streams&quot;</span><span class="p">)</span>

<span class="n">topo</span> <span class="o">=</span> <span class="n">Topology</span><span class="p">()</span>
<span class="o">...</span>
<span class="n">submit</span><span class="p">(</span><span class="n">ContextTypes</span><span class="o">.</span><span class="n">DISTRIBUTED</span><span class="p">,</span> <span class="n">topo</span><span class="p">,</span> <span class="n">cfg</span><span class="p">)</span>
</pre></div>
</div>
<p>The resultant <cite>cfg</cite> dict may be augmented with other values such as
a <a class="reference internal" href="#streamsx.topology.context.JobConfig" title="streamsx.topology.context.JobConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">JobConfig</span></code></a> or keys from <a class="reference internal" href="#streamsx.topology.context.ConfigParams" title="streamsx.topology.context.ConfigParams"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigParams</span></code></a>.</p>
<p><em>External to cluster or project</em></p>
<p>The <cite>Topology</cite> is compiled using the Streams build service and submitted
to a Streams service instance running in Cloud Pak for Data.</p>
<dl class="simple">
<dt>Environment variables:</dt><dd><p>These environment variables define how the application is built and submitted.</p>
<ul class="simple">
<li><p><strong>CP4D_URL</strong> - Cloud Pak for Data deployment URL, e.g. <cite>https://cp4d_server:31843</cite></p></li>
<li><p><strong>STREAMS_INSTANCE_ID</strong> - Streams service instance name.</p></li>
<li><p><strong>STREAMS_USERNAME</strong> - (optional) User name to submit the job as, defaulting to the current operating system user name.</p></li>
<li><p><strong>STREAMS_PASSWORD</strong> - Password for authentication.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">IBM Cloud Pak for Data standalone configuration</p>
<p>The <cite>Topology</cite> is compiled using the Streams build service and submitted
to a Streams service instance using REST apis.</p>
<dl class="simple">
<dt>Environment variables:</dt><dd><p>These environment variables define how the application is built and submitted.</p>
<ul class="simple">
<li><p><strong>STREAMS_BUILD_URL</strong> - Streams build service URL, e.g. when the service is exposed as node port: <cite>https://&lt;NODE-IP&gt;:&lt;NODE-PORT&gt;</cite></p></li>
<li><p><strong>STREAMS_REST_URL</strong> - Streams SWS service (REST API) URL, e.g. when the service is exposed as node port: <cite>https://&lt;NODE-IP&gt;:&lt;NODE-PORT&gt;</cite></p></li>
<li><p><strong>STREAMS_USERNAME</strong> - (optional) User name to submit the job as, defaulting to the current operating system user name.</p></li>
<li><p><strong>STREAMS_PASSWORD</strong> - Password for authentication.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">IBM Streams on-premise 4.2 &amp; 4.3</p>
<p>The <cite>Topology</cite> is compiled locally and the resultant Streams application bundle
(sab file) is submitted to an IBM Streams instance.</p>
<dl class="simple">
<dt>Environment variables:</dt><dd><p>These environment variables define how the application is built and submitted.</p>
<ul class="simple">
<li><p><strong>STREAMS_INSTALL</strong> - Location of a IBM Streams installation (4.2 or 4.3).</p></li>
<li><p><strong>STREAMS_DOMAIN_ID</strong> - Domain identifier for the Streams instance.</p></li>
<li><p><strong>STREAMS_INSTANCE_ID</strong> - Instance identifier.</p></li>
<li><p><strong>STREAMS_ZKCONNECT</strong> - (optional) ZooKeeper connection string for domain (when not using an embedded ZooKeeper)</p></li>
<li><p><strong>STREAMS_USERNAME</strong> - (optional) User name to submit the job as, defaulting to the current operating system user name.</p></li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="docutils literal notranslate"><span class="pre">streamtool</span></code> is used to submit the job with on-premise 4.2 &amp; 4.3 Streams and requires that <code class="docutils literal notranslate"><span class="pre">streamtool</span></code> does not prompt for authentication.  This is achieved by using <code class="docutils literal notranslate"><span class="pre">streamtool</span> <span class="pre">genkey</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://www.ibm.com/support/knowledgecenter/SSCRJU_4.2.1/com.ibm.streams.cfg.doc/doc/ibminfospherestreams-user-security-authentication-rsa.html">Generating authentication keys for IBM Streams</a></p>
</div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="streamsx.topology.context.ContextTypes.EDGE">
<code class="sig-name descname">EDGE</code><em class="property"> = 'EDGE'</em><a class="headerlink" href="#streamsx.topology.context.ContextTypes.EDGE" title="Permalink to this definition">¶</a></dt>
<dd><p>Submission to build service running on IBM Cloud Pak for Data to create an image for Edge.</p>
<p>The <cite>Topology</cite> is compiled and the resultant Streams application bundle
(sab file) is added to an image for Edge.</p>
<p class="rubric">IBM Cloud Pak for Data integated configuration</p>
<p><em>Projects (within cluster)</em></p>
<p>The <cite>Topology</cite> is compiled using the Streams build service for
a Streams service instance running in the same Cloud Pak for
Data cluster as the Jupyter notebook or script declaring the application.</p>
<p>The instance is specified in the configuration passed into <a class="reference internal" href="#streamsx.topology.context.submit" title="streamsx.topology.context.submit"><code class="xref py py-func docutils literal notranslate"><span class="pre">submit()</span></code></a>. The code that selects a service instance by name is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">streamsx.topology.context</span> <span class="k">import</span> <span class="n">submit</span><span class="p">,</span> <span class="n">ContextTypes</span>
<span class="kn">from</span> <span class="nn">icpd_core</span> <span class="k">import</span> <span class="n">icpd_util</span>
<span class="n">cfg</span> <span class="o">=</span> <span class="n">icpd_util</span><span class="o">.</span><span class="n">get_service_instance_details</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;instanceName&#39;</span><span class="p">,</span> <span class="n">instance_type</span><span class="o">=</span><span class="s2">&quot;streams&quot;</span><span class="p">)</span>

<span class="n">topo</span> <span class="o">=</span> <span class="n">Topology</span><span class="p">()</span>
<span class="o">...</span>
<span class="n">submit</span><span class="p">(</span><span class="n">ContextTypes</span><span class="o">.</span><span class="n">EDGE</span><span class="p">,</span> <span class="n">topo</span><span class="p">,</span> <span class="n">cfg</span><span class="p">)</span>
</pre></div>
</div>
<p>The resultant <cite>cfg</cite> dict may be augmented with other values such as
keys from <a class="reference internal" href="#streamsx.topology.context.ConfigParams" title="streamsx.topology.context.ConfigParams"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigParams</span></code></a> or <a class="reference internal" href="#streamsx.topology.context.JobConfig" title="streamsx.topology.context.JobConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">JobConfig</span></code></a>.
For example, apply <cite>imageName</cite> and <cite>imageTag</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">streamsx.topology.context</span> <span class="k">import</span> <span class="n">submit</span><span class="p">,</span> <span class="n">ContextTypes</span><span class="p">,</span> <span class="n">JobConfig</span>
<span class="kn">from</span> <span class="nn">icpd_core</span> <span class="k">import</span> <span class="n">icpd_util</span>
<span class="n">cfg</span> <span class="o">=</span> <span class="n">icpd_util</span><span class="o">.</span><span class="n">get_service_instance_details</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;instanceName&#39;</span><span class="p">,</span> <span class="n">instance_type</span><span class="o">=</span><span class="s2">&quot;streams&quot;</span><span class="p">)</span>

<span class="n">topo</span> <span class="o">=</span> <span class="n">Topology</span><span class="p">()</span>
<span class="o">...</span>
<span class="n">jc</span> <span class="o">=</span> <span class="n">JobConfig</span><span class="p">()</span>
<span class="n">jc</span><span class="o">.</span><span class="n">raw_overlay</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;edgeConfig&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;imageName&#39;</span><span class="p">:</span><span class="s1">&#39;py-sample-app&#39;</span><span class="p">,</span> <span class="s1">&#39;imageTag&#39;</span><span class="p">:</span><span class="s1">&#39;v1.0&#39;</span><span class="p">}}</span>
<span class="n">jc</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cfg</span><span class="p">)</span>

<span class="n">submit</span><span class="p">(</span><span class="n">ContextTypes</span><span class="o">.</span><span class="n">EDGE</span><span class="p">,</span> <span class="n">topo</span><span class="p">,</span> <span class="n">cfg</span><span class="p">)</span>
</pre></div>
</div>
<p><em>External to cluster or project</em></p>
<p>The <cite>Topology</cite> is compiled using the Streams build service for a Streams service instance running in Cloud Pak for Data.</p>
<dl class="simple">
<dt>Environment variables:</dt><dd><p>These environment variables define how the application is built and submitted.</p>
<ul class="simple">
<li><p><strong>CP4D_URL</strong> - Cloud Pak for Data deployment URL, e.g. <cite>https://cp4d_server:31843</cite></p></li>
<li><p><strong>STREAMS_INSTANCE_ID</strong> - Streams service instance name.</p></li>
<li><p><strong>STREAMS_USERNAME</strong> - (optional) User name to submit the job as, defaulting to the current operating system user name.</p></li>
<li><p><strong>STREAMS_PASSWORD</strong> - Password for authentication.</p></li>
</ul>
</dd>
</dl>
<p>Example code to query the base images:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">streamsx.build</span> <span class="k">import</span> <span class="n">BuildService</span>

<span class="n">bs</span> <span class="o">=</span> <span class="n">BuildService</span><span class="o">.</span><span class="n">of_endpoint</span><span class="p">(</span><span class="n">verify</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">baseImages</span> <span class="o">=</span> <span class="n">bs</span><span class="o">.</span><span class="n">get_base_images</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;# images = &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">baseImages</span><span class="p">)))</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">baseImages</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">registry</span><span class="p">)</span>
</pre></div>
</div>
<p>Example code to select a base image for the image build:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">streamsx.topology.context</span> <span class="k">import</span> <span class="n">submit</span><span class="p">,</span> <span class="n">ContextTypes</span><span class="p">,</span> <span class="n">JobConfig</span>
<span class="n">topo</span> <span class="o">=</span> <span class="n">Topology</span><span class="p">()</span>
<span class="o">...</span>
<span class="n">jc</span> <span class="o">=</span> <span class="n">JobConfig</span><span class="p">()</span>
<span class="n">jc</span><span class="o">.</span><span class="n">raw_overlay</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;edgeConfig&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;imageName&#39;</span><span class="p">:</span><span class="s1">&#39;py-sample-app&#39;</span><span class="p">,</span> <span class="s1">&#39;imageTag&#39;</span><span class="p">:</span><span class="s1">&#39;v1.0&#39;</span><span class="p">,</span> <span class="s1">&#39;baseImage&#39;</span><span class="p">:</span><span class="s1">&#39;streams-base-edge-conda-el7:5.3.0.0&#39;</span><span class="p">}}</span>
<span class="n">jc</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cfg</span><span class="p">)</span>

<span class="n">submit</span><span class="p">(</span><span class="n">ContextTypes</span><span class="o">.</span><span class="n">EDGE</span><span class="p">,</span> <span class="n">topo</span><span class="p">,</span> <span class="n">cfg</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">EDGE configuration</p>
<p>The dict <em>edgeConfig</em> supports the following fields that are used for the image creation:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>imageName</strong> - [str] name of the image</p></li>
<li><p><strong>imageTag</strong> - [str] name of the image tag</p></li>
<li><p><strong>baseImage</strong> - [str] identify the name of the base image</p></li>
<li><p><strong>pipPackages</strong> - [list] identify one or more Python install packages that are to be included in the image.</p></li>
<li><p><strong>condaPackages</strong> - [list] identify one or more anaconda packages that are to be included in the image.</p></li>
<li><p><strong>rpms</strong> - [list] identify one or more linux RPMs that are to be included in the image</p></li>
<li><p><strong>locales</strong> - [list] identify one or more locales that are to be included in the image. The first item in the list is the “default” locale. The locales are identified in the java format  &lt;language&gt;_&lt;county&gt;_&lt;variant&gt;. Example: “en_US”</p></li>
</ul>
</div></blockquote>
<p>Example with adding pip packages and rpms:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jc</span><span class="o">.</span><span class="n">raw_overlay</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;edgeConfig&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;imageName&#39;</span><span class="p">:</span> <span class="n">image_name</span><span class="p">,</span> <span class="s1">&#39;imageTag&#39;</span><span class="p">:</span> <span class="n">image_tag</span><span class="p">,</span> <span class="s1">&#39;pipPackages&#39;</span><span class="p">:[</span><span class="s1">&#39;pandas&#39;</span><span class="p">,</span><span class="s1">&#39;numpy&#39;</span><span class="p">],</span> <span class="s1">&#39;rpms&#39;</span><span class="p">:[</span><span class="s1">&#39;atlas-devel&#39;</span><span class="p">]}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="streamsx.topology.context.ContextTypes.EDGE_BUNDLE">
<code class="sig-name descname">EDGE_BUNDLE</code><em class="property"> = 'EDGE_BUNDLE'</em><a class="headerlink" href="#streamsx.topology.context.ContextTypes.EDGE_BUNDLE" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a Streams application bundle.</p>
<p>The <cite>Topology</cite> is compiled on build service running on IBM Cloud Pak for Data and the resultant Streams application bundle
(sab file) is downloaded.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><cite>EDGE_BUNDLE</cite> is typically only used when diagnosing issues with applications for EDGE.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="streamsx.topology.context.ContextTypes.STANDALONE">
<code class="sig-name descname">STANDALONE</code><em class="property"> = 'STANDALONE'</em><a class="headerlink" href="#streamsx.topology.context.ContextTypes.STANDALONE" title="Permalink to this definition">¶</a></dt>
<dd><p>Build and execute locally.</p>
<p>Compiles and executes the <cite>Topology</cite> locally in IBM Streams standalone mode as a separate sub-process.
Typically used for devlopment and testing.</p>
<p>The call to <a class="reference internal" href="#streamsx.topology.context.submit" title="streamsx.topology.context.submit"><code class="xref py py-func docutils literal notranslate"><span class="pre">submit()</span></code></a> return when (if) the application completes. An application
completes when it has finite source streams and all tuples from those streams have been
processed by the complete topology. If the source streams are infinite (e.g. reading tweets)
then the standalone application will not complete.</p>
<dl class="simple">
<dt>Environment variables:</dt><dd><p>This environment variables define how the application is built.</p>
<ul class="simple">
<li><p><strong>STREAMS_INSTALL</strong> - Location of a IBM Streams installation (4.0.1 or later).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="streamsx.topology.context.ContextTypes.STREAMING_ANALYTICS_SERVICE">
<code class="sig-name descname">STREAMING_ANALYTICS_SERVICE</code><em class="property"> = 'STREAMING_ANALYTICS_SERVICE'</em><a class="headerlink" href="#streamsx.topology.context.ContextTypes.STREAMING_ANALYTICS_SERVICE" title="Permalink to this definition">¶</a></dt>
<dd><p>Submission to Streaming Analytics service running on IBM Cloud.</p>
<p>The <cite>Topology</cite> is compiled and the resultant Streams application bundle
(sab file) is submitted for execution on the Streaming Analytics service.</p>
<p>When <strong>STREAMS_INSTALL</strong> is not set or the <a class="reference internal" href="#streamsx.topology.context.submit" title="streamsx.topology.context.submit"><code class="xref py py-func docutils literal notranslate"><span class="pre">submit()</span></code></a> <cite>config</cite> parameter has
<a class="reference internal" href="#streamsx.topology.context.ConfigParams.FORCE_REMOTE_BUILD" title="streamsx.topology.context.ConfigParams.FORCE_REMOTE_BUILD"><code class="xref py py-const docutils literal notranslate"><span class="pre">FORCE_REMOTE_BUILD</span></code></a> set to <cite>True</cite> the compilation of the application
occurs remotely by the service. This allows creation and submission of Streams applications
without a local install of IBM Streams.</p>
<p>When <strong>STREAMS_INSTALL</strong> is set and the <a class="reference internal" href="#streamsx.topology.context.submit" title="streamsx.topology.context.submit"><code class="xref py py-func docutils literal notranslate"><span class="pre">submit()</span></code></a> <cite>config</cite> parameter has
<a class="reference internal" href="#streamsx.topology.context.ConfigParams.FORCE_REMOTE_BUILD" title="streamsx.topology.context.ConfigParams.FORCE_REMOTE_BUILD"><code class="xref py py-const docutils literal notranslate"><span class="pre">FORCE_REMOTE_BUILD</span></code></a> set to <cite>False</cite> or not set then the creation of the
Streams application bundle occurs locally and the bundle is submitted for execution on the service.</p>
<dl class="simple">
<dt>Environment variables:</dt><dd><p>These environment variables define how the application is built and submitted.</p>
<ul class="simple">
<li><p><strong>STREAMS_INSTALL</strong> - (optional) Location of a IBM Streams installation (4.0.1 or later). The install must be running on RedHat/CentOS 7 and <cite>x86_64</cite> architecture.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="streamsx.topology.context.ContextTypes.TOOLKIT">
<code class="sig-name descname">TOOLKIT</code><em class="property"> = 'TOOLKIT'</em><a class="headerlink" href="#streamsx.topology.context.ContextTypes.TOOLKIT" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an SPL toolkit.</p>
<p><cite>Topology</cite> applications are implemented as an SPL application before compilation into an Streams application
bundle. This context type produces the intermediate SPL toolkit that is input to the SPL compiler for
bundle creation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><cite>TOOLKIT</cite> is typically only used when diagnosing issues with bundle generation.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="streamsx.topology.context.ConfigParams">
<em class="property">class </em><code class="sig-prename descclassname">streamsx.topology.context.</code><code class="sig-name descname">ConfigParams</code><a class="headerlink" href="#streamsx.topology.context.ConfigParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Configuration options which may be used as keys in <a class="reference internal" href="#streamsx.topology.context.submit" title="streamsx.topology.context.submit"><code class="xref py py-func docutils literal notranslate"><span class="pre">submit()</span></code></a> <cite>config</cite> parameter.</p>
<dl class="attribute">
<dt id="streamsx.topology.context.ConfigParams.FORCE_REMOTE_BUILD">
<code class="sig-name descname">FORCE_REMOTE_BUILD</code><em class="property"> = 'topology.forceRemoteBuild'</em><a class="headerlink" href="#streamsx.topology.context.ConfigParams.FORCE_REMOTE_BUILD" title="Permalink to this definition">¶</a></dt>
<dd><p>Force a remote build of the application.</p>
<p>When submitting to <code class="xref py py-const docutils literal notranslate"><span class="pre">STREAMING_ANALYTICS_SERVICE</span></code> a local build of the Streams application bundle
will occur if the environment variable <strong>STREAMS_INSTALL</strong> is set. Setting this flag to <cite>True</cite> ignores the
local Streams install and forces the build to occur remotely using the service.</p>
</dd></dl>

<dl class="attribute">
<dt id="streamsx.topology.context.ConfigParams.JOB_CONFIG">
<code class="sig-name descname">JOB_CONFIG</code><em class="property"> = 'topology.jobConfigOverlays'</em><a class="headerlink" href="#streamsx.topology.context.ConfigParams.JOB_CONFIG" title="Permalink to this definition">¶</a></dt>
<dd><p>Key for a <a class="reference internal" href="#streamsx.topology.context.JobConfig" title="streamsx.topology.context.JobConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">JobConfig</span></code></a> object representing a job configuration for a submission.</p>
</dd></dl>

<dl class="attribute">
<dt id="streamsx.topology.context.ConfigParams.SC_OPTIONS">
<code class="sig-name descname">SC_OPTIONS</code><em class="property"> = 'topology.sc.options'</em><a class="headerlink" href="#streamsx.topology.context.ConfigParams.SC_OPTIONS" title="Permalink to this definition">¶</a></dt>
<dd><p>Options to be passed to IBM Streams sc command.</p>
<p>A topology is compiled into a Streams application
bundle (<cite>sab</cite>) using the SPL compiler <code class="docutils literal notranslate"><span class="pre">sc</span></code>.</p>
<p>Additional options to be passed to <code class="docutils literal notranslate"><span class="pre">sc</span></code>
may be set using this key. The value can be a
single string option (e.g. <code class="docutils literal notranslate"><span class="pre">--c++std=c++11</span></code> to select C++ 11 compilation)
or a list of strings for multiple options.</p>
<p>Setting <code class="docutils literal notranslate"><span class="pre">sc</span></code> options may be required when invoking SPL operators
directly or testing SPL applications.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Options that modify the requested submission context (e.g. setting
a different main composite) or deprecated options should not be specified.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.12.10.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="streamsx.topology.context.ConfigParams.SERVICE_DEFINITION">
<code class="sig-name descname">SERVICE_DEFINITION</code><em class="property"> = 'topology.service.definition'</em><a class="headerlink" href="#streamsx.topology.context.ConfigParams.SERVICE_DEFINITION" title="Permalink to this definition">¶</a></dt>
<dd><p>Streaming Analytics service definition.
Identifies the Streaming Analytics service to use. The definition can be one of</p>
<blockquote>
<div><ul class="simple">
<li><p>The <cite>service credentials</cite> copied from the <cite>Service credentials</cite> page of the service console (not the Streams console).
Credentials are provided in JSON format. They contain such as the API key and secret, as well as connection information for the service.</p></li>
<li><p>A JSON object (<cite>dict</cite>) created from the <cite>service credentials</cite>, for example with <cite>json.loads(service_credentials)</cite></p></li>
<li><p>A JSON object (<cite>dict</cite>) of the form: <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">&quot;type&quot;:</span> <span class="pre">&quot;streaming-analytics&quot;,</span> <span class="pre">&quot;name&quot;:</span> <span class="pre">&quot;service</span> <span class="pre">name&quot;,</span> <span class="pre">&quot;credentials&quot;:</span> <span class="pre">...</span> <span class="pre">}</span></code>
with the <cite>service credentials</cite> as the value of the <code class="docutils literal notranslate"><span class="pre">credentials</span></code> key. The value of the <code class="docutils literal notranslate"><span class="pre">credentials</span></code> key can
be a JSON object (<cite>dict</cite>) or a <cite>str</cite> copied from the <cite>Service credentials</cite> page of the service console.</p></li>
</ul>
</div></blockquote>
<p>This key takes precedence over <a class="reference internal" href="#streamsx.topology.context.ConfigParams.VCAP_SERVICES" title="streamsx.topology.context.ConfigParams.VCAP_SERVICES"><code class="xref py py-const docutils literal notranslate"><span class="pre">VCAP_SERVICES</span></code></a> and <a class="reference internal" href="#streamsx.topology.context.ConfigParams.SERVICE_NAME" title="streamsx.topology.context.ConfigParams.SERVICE_NAME"><code class="xref py py-const docutils literal notranslate"><span class="pre">SERVICE_NAME</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="service.html#sas-service-def"><span class="std std-ref">Service definition</span></a></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="streamsx.topology.context.ConfigParams.SERVICE_NAME">
<code class="sig-name descname">SERVICE_NAME</code><em class="property"> = 'topology.service.name'</em><a class="headerlink" href="#streamsx.topology.context.ConfigParams.SERVICE_NAME" title="Permalink to this definition">¶</a></dt>
<dd><p>Streaming Analytics service name.</p>
<p>Selects the specific Streaming Analytics service from VCAP service definitions
defined by the the environment variable <strong>VCAP_SERVICES</strong> or the key <a class="reference internal" href="#streamsx.topology.context.ConfigParams.VCAP_SERVICES" title="streamsx.topology.context.ConfigParams.VCAP_SERVICES"><code class="xref py py-const docutils literal notranslate"><span class="pre">VCAP_SERVICES</span></code></a> in the <cite>submit</cite> config.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="service.html#sas-service-name"><span class="std std-ref">Selecting the service</span></a></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="streamsx.topology.context.ConfigParams.SSL_VERIFY">
<code class="sig-name descname">SSL_VERIFY</code><em class="property"> = 'topology.SSLVerify'</em><a class="headerlink" href="#streamsx.topology.context.ConfigParams.SSL_VERIFY" title="Permalink to this definition">¶</a></dt>
<dd><p>Key for the SSL verification value passed to <cite>requests</cite> as its <code class="docutils literal notranslate"><span class="pre">verify</span></code>
option for distributed contexts. By default set to <cite>True</cite>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> is supported. Behaviour is undefined
when passing a path to a CA_BUNDLE file or directory with
certificates of trusted CAs.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.11.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="streamsx.topology.context.ConfigParams.STREAMS_CONNECTION">
<code class="sig-name descname">STREAMS_CONNECTION</code><em class="property"> = 'topology.streamsConnection'</em><a class="headerlink" href="#streamsx.topology.context.ConfigParams.STREAMS_CONNECTION" title="Permalink to this definition">¶</a></dt>
<dd><p>Key for a <code class="xref py py-class docutils literal notranslate"><span class="pre">StreamsConnection</span></code> object for connecting to a running IBM Streams instance. Only supported for Streams 4.2, 4.3. Requires environment
variable <code class="docutils literal notranslate"><span class="pre">STREAMS_INSTANCE_ID</span></code> to be set.</p>
</dd></dl>

<dl class="attribute">
<dt id="streamsx.topology.context.ConfigParams.VCAP_SERVICES">
<code class="sig-name descname">VCAP_SERVICES</code><em class="property"> = 'topology.service.vcap'</em><a class="headerlink" href="#streamsx.topology.context.ConfigParams.VCAP_SERVICES" title="Permalink to this definition">¶</a></dt>
<dd><p>Streaming Analytics service definitions including credentials in <strong>VCAP_SERVICES</strong> format.</p>
<p>Provides the connection credentials when connecting to a Streaming Analytics service
using context type <a class="reference internal" href="#streamsx.topology.context.ContextTypes.STREAMING_ANALYTICS_SERVICE" title="streamsx.topology.context.ContextTypes.STREAMING_ANALYTICS_SERVICE"><code class="xref py py-const docutils literal notranslate"><span class="pre">STREAMING_ANALYTICS_SERVICE</span></code></a>.
The <code class="docutils literal notranslate"><span class="pre">streaming-analytics</span></code> service to use within the service definitions is identified
by name using <a class="reference internal" href="#streamsx.topology.context.ConfigParams.SERVICE_NAME" title="streamsx.topology.context.ConfigParams.SERVICE_NAME"><code class="xref py py-const docutils literal notranslate"><span class="pre">SERVICE_NAME</span></code></a>.</p>
<p>The key overrides the environment variable <strong>VCAP_SERVICES</strong>.</p>
<dl class="simple">
<dt>The value can be:</dt><dd><ul class="simple">
<li><p>Path to a local file containing a JSON representation of the VCAP services information.</p></li>
<li><p>Dictionary containing the VCAP services information.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="service.html#sas-vcap"><span class="std std-ref">VCAP services</span></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="streamsx.topology.context.JobConfig">
<em class="property">class </em><code class="sig-prename descclassname">streamsx.topology.context.</code><code class="sig-name descname">JobConfig</code><span class="sig-paren">(</span><em class="sig-param">job_name=None</em>, <em class="sig-param">job_group=None</em>, <em class="sig-param">preload=False</em>, <em class="sig-param">data_directory=None</em>, <em class="sig-param">tracing=None</em><span class="sig-paren">)</span><a class="headerlink" href="#streamsx.topology.context.JobConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Job configuration.</p>
<p><cite>JobConfig</cite> allows configuration of job that will result from
submission of a <code class="xref py py-class docutils literal notranslate"><span class="pre">Topology</span></code> (application).</p>
<p>A <cite>JobConfig</cite> is set in the <cite>config</cite> dictionary passed to <a class="reference internal" href="#streamsx.topology.context.submit" title="streamsx.topology.context.submit"><code class="xref py py-func docutils literal notranslate"><span class="pre">submit()</span></code></a>
using the key <a class="reference internal" href="#streamsx.topology.context.ConfigParams.JOB_CONFIG" title="streamsx.topology.context.ConfigParams.JOB_CONFIG"><code class="xref py py-const docutils literal notranslate"><span class="pre">JOB_CONFIG</span></code></a>. <a class="reference internal" href="#streamsx.topology.context.JobConfig.add" title="streamsx.topology.context.JobConfig.add"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add()</span></code></a> exists as a convenience
method to add it to a submission configuration.</p>
<p>A <cite>JobConfig</cite> can also be used when submitting a Streams application
bundle through the Streaming Analytics REST API method <a class="reference internal" href="streamsx.rest_primitives.html#streamsx.rest_primitives.StreamingAnalyticsService.submit_job" title="streamsx.rest_primitives.StreamingAnalyticsService.submit_job"><code class="xref py py-meth docutils literal notranslate"><span class="pre">submit_job()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>job_name</strong> (<em>str</em>) – The name that is assigned to the job. A job name must be unique within a Streasm instance
When set to <cite>None</cite> a system generated name is used.</p></li>
<li><p><strong>job_group</strong> (<em>str</em>) – The job group to use to control permissions for the submitted job.</p></li>
<li><p><strong>preload</strong> (<em>bool</em>) – Specifies whether to preload the job onto all resources in the instance, even if the job is
not currently needed on each. Preloading the job can improve PE restart performance if the PEs are
relocated to a new resource.</p></li>
<li><p><strong>data_directory</strong> (<em>str</em>) – Specifies the location of the optional data directory. The data directory is a path
within the cluster that is running the Streams instance.</p></li>
<li><p><strong>tracing</strong> – Specify the application trace level. See <a class="reference internal" href="#streamsx.topology.context.JobConfig.tracing" title="streamsx.topology.context.JobConfig.tracing"><code class="xref py py-attr docutils literal notranslate"><span class="pre">tracing</span></code></a></p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Submit a job with the name NewsIngester</span>
<span class="n">cfg</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">job_config</span> <span class="o">=</span> <span class="n">JobConfig</span><span class="p">(</span><span class="n">job_name</span><span class="o">=</span><span class="s1">&#39;NewsIngester&#39;</span><span class="p">)</span>
<span class="n">job_config</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cfg</span><span class="p">)</span>
<span class="n">context</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="s1">&#39;STREAMING_ANALYTICS_SERVICE&#39;</span><span class="p">,</span> <span class="n">topo</span><span class="p">,</span> <span class="n">cfg</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://www.ibm.com/support/knowledgecenter/en/SSCRJU_4.2.1/com.ibm.streams.ref.doc/doc/submitjobparameters.html">Job configuration overlays reference</a></p>
</div>
<dl class="method">
<dt id="streamsx.topology.context.JobConfig.add">
<code class="sig-name descname">add</code><span class="sig-paren">(</span><em class="sig-param">config</em><span class="sig-paren">)</span><a class="headerlink" href="#streamsx.topology.context.JobConfig.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add this <cite>JobConfig</cite> into a submission configuration object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> (<em>dict</em>) – Submission configuration.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>config.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="streamsx.topology.context.JobConfig.as_overlays">
<code class="sig-name descname">as_overlays</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#streamsx.topology.context.JobConfig.as_overlays" title="Permalink to this definition">¶</a></dt>
<dd><p>Return this job configuration as a complete job configuration overlays object.</p>
<p>Converts this job configuration into the full format supported by IBM Streams.
The returned <cite>dict</cite> contains:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">jobConfigOverlays</span></code> key with an array containing a single job configuration overlay.</p></li>
<li><p>an optional <code class="docutils literal notranslate"><span class="pre">comment</span></code> key containing the comment <code class="docutils literal notranslate"><span class="pre">str</span></code>.</p></li>
</ul>
</div></blockquote>
<p>For example with this <code class="docutils literal notranslate"><span class="pre">JobConfig</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jc</span> <span class="o">=</span> <span class="n">JobConfig</span><span class="p">(</span><span class="n">job_name</span><span class="o">=</span><span class="s1">&#39;TestIngester&#39;</span><span class="p">)</span>
<span class="n">jc</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="s1">&#39;Test configuration&#39;</span>
<span class="n">jc</span><span class="o">.</span><span class="n">target_pe_count</span> <span class="o">=</span> <span class="mi">2</span>
</pre></div>
</div>
<p>the returned <cite>dict</cite> would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;comment&quot;</span><span class="p">:</span> <span class="s2">&quot;Test configuration&quot;</span><span class="p">,</span>
    <span class="s2">&quot;jobConfigOverlays&quot;</span><span class="p">:</span>
        <span class="p">[{</span><span class="s2">&quot;jobConfig&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;jobName&quot;</span><span class="p">:</span> <span class="s2">&quot;TestIngester&quot;</span><span class="p">},</span>
        <span class="s2">&quot;deploymentConfig&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;fusionTargetPeCount&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;fusionScheme&quot;</span><span class="p">:</span> <span class="s2">&quot;manual&quot;</span><span class="p">}}]}</span>
</pre></div>
</div>
<p>The returned overlays object can be saved as JSON in a file
using <code class="docutils literal notranslate"><span class="pre">json.dump</span></code>. A file can be used with job submission
mechanisms that support a job config overlays file, such as
<code class="docutils literal notranslate"><span class="pre">streamtool</span> <span class="pre">submitjob</span></code> or the IBM Streams console.</p>
<p>Example of saving a <code class="docutils literal notranslate"><span class="pre">JobConfig</span></code> instance as a file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jc</span> <span class="o">=</span> <span class="n">JobConfig</span><span class="p">(</span><span class="n">job_name</span><span class="o">=</span><span class="s1">&#39;TestIngester&#39;</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;jobconfig.json&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">jc</span><span class="o">.</span><span class="n">as_overlays</span><span class="p">(),</span> <span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Complete job configuration overlays object built from this object.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.9.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="streamsx.topology.context.JobConfig.comment">
<em class="property">property </em><code class="sig-name descname">comment</code><a class="headerlink" href="#streamsx.topology.context.JobConfig.comment" title="Permalink to this definition">¶</a></dt>
<dd><p>Comment for job configuration.</p>
<p>The comment does not change the functionality of the job configuration.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Comment text, <cite>None</cite> if it has not been set.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.9.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="streamsx.topology.context.JobConfig.from_overlays">
<em class="property">static </em><code class="sig-name descname">from_overlays</code><span class="sig-paren">(</span><em class="sig-param">overlays</em><span class="sig-paren">)</span><a class="headerlink" href="#streamsx.topology.context.JobConfig.from_overlays" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a <cite>JobConfig</cite> instance from a full job configuration
overlays object.</p>
<p>All logical items, such as <code class="docutils literal notranslate"><span class="pre">comment</span></code> and <code class="docutils literal notranslate"><span class="pre">job_name</span></code>, are
extracted from <cite>overlays</cite>. The remaining information in the
single job config overlay in <code class="docutils literal notranslate"><span class="pre">overlays</span></code> is set as <code class="docutils literal notranslate"><span class="pre">raw_overlay</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>overlays</strong> (<em>dict</em>) – Full job configuration overlays object.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Instance representing logical view of <cite>overlays</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#streamsx.topology.context.JobConfig" title="streamsx.topology.context.JobConfig">JobConfig</a></p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.9.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="streamsx.topology.context.JobConfig.raw_overlay">
<em class="property">property </em><code class="sig-name descname">raw_overlay</code><a class="headerlink" href="#streamsx.topology.context.JobConfig.raw_overlay" title="Permalink to this definition">¶</a></dt>
<dd><p>Raw Job Config Overlay.</p>
<p>A submitted job is configured using Job Config Overlay which
is represented as a JSON. <cite>JobConfig</cite> exposes Job Config Overlay
logically with properties such as <code class="docutils literal notranslate"><span class="pre">job_name</span></code> and <code class="docutils literal notranslate"><span class="pre">tracing</span></code>.
This property (as a <code class="docutils literal notranslate"><span class="pre">dict</span></code>) allows merging of the
configuration defined by this object and raw representation
of a Job Config Overlay. This can be used when a capability
of Job Config Overlay is not exposed logically through this class.</p>
<p>For example, the threading model can be set by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jc</span> <span class="o">=</span> <span class="n">streamsx</span><span class="o">.</span><span class="n">topology</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">JobConfig</span><span class="p">()</span>
<span class="n">jc</span><span class="o">.</span><span class="n">raw_overlay</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;deploymentConfig&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;threadingModel&#39;</span><span class="p">:</span> <span class="s1">&#39;manual&#39;</span><span class="p">}}</span>
</pre></div>
</div>
<p>Any logical items set by this object <strong>overwrite</strong> any set with
<code class="docutils literal notranslate"><span class="pre">raw_overlay</span></code>. For example this sets the job name to
to value set in the constructor (<cite>DBIngest</cite>) not the value
in <code class="docutils literal notranslate"><span class="pre">raw_overlay</span></code> (<cite>Ingest</cite>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jc</span> <span class="o">=</span> <span class="n">streamsx</span><span class="o">.</span><span class="n">topology</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">JobConfig</span><span class="p">(</span><span class="n">job_name</span><span class="o">=</span><span class="s1">&#39;DBIngest&#39;</span><span class="p">)</span>
<span class="n">jc</span><span class="o">.</span><span class="n">raw_overlay</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;jobConfig&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;jobName&#39;</span><span class="p">:</span> <span class="s1">&#39;Ingest&#39;</span><span class="p">}}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Contents of <code class="docutils literal notranslate"><span class="pre">raw_overlay</span></code> is a <code class="docutils literal notranslate"><span class="pre">dict</span></code> that is
must match a single Job Config Overlay and be serializable
as JSON to the correct format.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://www.ibm.com/support/knowledgecenter/en/SSCRJU_4.2.1/com.ibm.streams.ref.doc/doc/submitjobparameters.html">Job Config Overlay reference</a></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.9.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="streamsx.topology.context.JobConfig.submission_parameters">
<em class="property">property </em><code class="sig-name descname">submission_parameters</code><a class="headerlink" href="#streamsx.topology.context.JobConfig.submission_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Job submission parameters.</p>
<p>Submission parameters values for the job. A <cite>dict</cite> object
that maps submission parameter names to values.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.9.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="streamsx.topology.context.JobConfig.target_pe_count">
<em class="property">property </em><code class="sig-name descname">target_pe_count</code><a class="headerlink" href="#streamsx.topology.context.JobConfig.target_pe_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Target processing element count.</p>
<p>When submitted against a Streams instance <cite>target_pe_count</cite> provides
a hint to the scheduler as to how to partition the topology
across processing elements (processes) for the job execution. When a job
contains multiple processing elements (PEs) then the Streams scheduler can
distributed the PEs across the resources (hosts) running in the instance.</p>
<p>When set to <code class="docutils literal notranslate"><span class="pre">None</span></code> (the default) no hint is supplied to the scheduler.
The number of PEs in the submitted job will be determined by the scheduler.</p>
<p>The value is only a target and may be ignored when the topology contains
<code class="xref py py-meth docutils literal notranslate"><span class="pre">isolate()</span></code> calls.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only supported in Streaming Analytics service and IBM Streams 4.2 or later.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="streamsx.topology.context.JobConfig.tracing">
<em class="property">property </em><code class="sig-name descname">tracing</code><a class="headerlink" href="#streamsx.topology.context.JobConfig.tracing" title="Permalink to this definition">¶</a></dt>
<dd><p>Runtime application trace level.</p>
<p>The runtime application trace level can be a string with value <code class="docutils literal notranslate"><span class="pre">error</span></code>, <code class="docutils literal notranslate"><span class="pre">warn</span></code>, <code class="docutils literal notranslate"><span class="pre">info</span></code>,
<code class="docutils literal notranslate"><span class="pre">debug</span></code> or <code class="docutils literal notranslate"><span class="pre">trace</span></code>.</p>
<p>In addition a level from Python <code class="docutils literal notranslate"><span class="pre">logging</span></code> module can be used in with <code class="docutils literal notranslate"><span class="pre">CRITICAL</span></code> and <code class="docutils literal notranslate"><span class="pre">ERROR</span></code> mapping
to <code class="docutils literal notranslate"><span class="pre">error</span></code>, <code class="docutils literal notranslate"><span class="pre">WARNING</span></code> to <code class="docutils literal notranslate"><span class="pre">warn</span></code>, <code class="docutils literal notranslate"><span class="pre">INFO</span></code> to <code class="docutils literal notranslate"><span class="pre">info</span></code> and <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code> to <code class="docutils literal notranslate"><span class="pre">debug</span></code>.</p>
<p>Setting tracing to <cite>None</cite> or <code class="docutils literal notranslate"><span class="pre">logging.NOTSET</span></code> will result in the job submission using the Streams instance
application trace level.</p>
<p>The value of <code class="docutils literal notranslate"><span class="pre">tracing</span></code> is the level as a string (<code class="docutils literal notranslate"><span class="pre">error</span></code>, <code class="docutils literal notranslate"><span class="pre">warn</span></code>, <code class="docutils literal notranslate"><span class="pre">info</span></code>, <code class="docutils literal notranslate"><span class="pre">debug</span></code> or <code class="docutils literal notranslate"><span class="pre">trace</span></code>)
or None.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="streamsx.topology.context.SubmissionResult">
<em class="property">class </em><code class="sig-prename descclassname">streamsx.topology.context.</code><code class="sig-name descname">SubmissionResult</code><span class="sig-paren">(</span><em class="sig-param">results</em><span class="sig-paren">)</span><a class="headerlink" href="#streamsx.topology.context.SubmissionResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Passed back to the user after a call to submit.
Allows the user to use dot notation to access dictionary elements.</p>
<p>Example accessing result files when using <a class="reference internal" href="#streamsx.topology.context.ContextTypes.BUNDLE" title="streamsx.topology.context.ContextTypes.BUNDLE"><code class="xref py py-const docutils literal notranslate"><span class="pre">BUNDLE</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">submission_result</span> <span class="o">=</span> <span class="n">submit</span><span class="p">(</span><span class="n">ContextTypes</span><span class="o">.</span><span class="n">BUNDLE</span><span class="p">,</span> <span class="n">topology</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">submission_result</span><span class="o">.</span><span class="n">bundlePath</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">submission_result</span><span class="o">.</span><span class="n">bundlePath</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">submission_result</span><span class="o">.</span><span class="n">jobConfigPath</span><span class="p">)</span>
</pre></div>
</div>
<p>Result contains the generated toolkit location when using <a class="reference internal" href="#streamsx.topology.context.ContextTypes.TOOLKIT" title="streamsx.topology.context.ContextTypes.TOOLKIT"><code class="xref py py-const docutils literal notranslate"><span class="pre">TOOLKIT</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">submission_result</span> <span class="o">=</span> <span class="n">submit</span><span class="p">(</span><span class="n">ContextTypes</span><span class="o">.</span><span class="n">TOOLKIT</span><span class="p">,</span> <span class="n">topology</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">submission_result</span><span class="o">.</span><span class="n">toolkitRoot</span><span class="p">)</span>
</pre></div>
</div>
<p>Result when using <a class="reference internal" href="#streamsx.topology.context.ContextTypes.DISTRIBUTED" title="streamsx.topology.context.ContextTypes.DISTRIBUTED"><code class="xref py py-const docutils literal notranslate"><span class="pre">DISTRIBUTED</span></code></a> depends if the <cite>Topology</cite> is compiled locally and the resultant Streams application bundle
(sab file) is submitted to an IBM Streams instance or if the <cite>Topology</cite> is compiled on build-service and submitted to an instance in Cloud Pak for Data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">submission_result</span> <span class="o">=</span> <span class="n">submit</span><span class="p">(</span><span class="n">ContextTypes</span><span class="o">.</span><span class="n">DISTRIBUTED</span><span class="p">,</span> <span class="n">topology</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">submission_result</span><span class="p">)</span>
</pre></div>
</div>
<p>Result contains the generated <cite>image</cite>, <cite>imageDigest</cite>, <cite>submitMetrics</cite> (building the bundle), <cite>submitImageMetrics</cite> (building the image) when using <a class="reference internal" href="#streamsx.topology.context.ContextTypes.EDGE" title="streamsx.topology.context.ContextTypes.EDGE"><code class="xref py py-const docutils literal notranslate"><span class="pre">EDGE</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">submission_result</span> <span class="o">=</span> <span class="n">submit</span><span class="p">(</span><span class="n">ContextTypes</span><span class="o">.</span><span class="n">EDGE</span><span class="p">,</span> <span class="n">topology</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">submission_result</span><span class="o">.</span><span class="n">image</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">submission_result</span><span class="o">.</span><span class="n">imageDigest</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="streamsx.topology.context.SubmissionResult.cancel_job_button">
<code class="sig-name descname">cancel_job_button</code><span class="sig-paren">(</span><em class="sig-param">description=None</em><span class="sig-paren">)</span><a class="headerlink" href="#streamsx.topology.context.SubmissionResult.cancel_job_button" title="Permalink to this definition">¶</a></dt>
<dd><p>Display a button that will cancel the submitted job.</p>
<p>Used in a Jupyter IPython notebook to provide an interactive
mechanism to cancel a job submitted from the notebook.</p>
<p>Once clicked the button is disabled unless the cancel fails.</p>
<p>A job may be cancelled directly using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">submission_result</span> <span class="o">=</span> <span class="n">submit</span><span class="p">(</span><span class="n">ctx_type</span><span class="p">,</span> <span class="n">topology</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
<span class="n">submission_result</span><span class="o">.</span><span class="n">job</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>description</strong> (<em>str</em>) – Text used as the button description, defaults to value based upon the job name.</p>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Behavior when called outside a notebook is undefined.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.12.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="streamsx.topology.context.SubmissionResult.job">
<em class="property">property </em><code class="sig-name descname">job</code><a class="headerlink" href="#streamsx.topology.context.SubmissionResult.job" title="Permalink to this definition">¶</a></dt>
<dd><p>REST binding for the job associated with the submitted build.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>REST binding for running job or <code class="docutils literal notranslate"><span class="pre">None</span></code> if connection information was not available or no job was submitted.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="streamsx.rest_primitives.html#streamsx.rest_primitives.Job" title="streamsx.rest_primitives.Job">Job</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="streamsx.topology.context.submit">
<code class="sig-prename descclassname">streamsx.topology.context.</code><code class="sig-name descname">submit</code><span class="sig-paren">(</span><em class="sig-param">ctxtype</em>, <em class="sig-param">graph</em>, <em class="sig-param">config=None</em>, <em class="sig-param">username=None</em>, <em class="sig-param">password=None</em><span class="sig-paren">)</span><a class="headerlink" href="#streamsx.topology.context.submit" title="Permalink to this definition">¶</a></dt>
<dd><p>Submits a <cite>Topology</cite> (application) using the specified context type.</p>
<p>Used to submit an application for compilation into a Streams application and
execution within an Streaming Analytics service or IBM Streams instance.</p>
<p><cite>ctxtype</cite> defines how the application will be submitted, see <a class="reference internal" href="#streamsx.topology.context.ContextTypes" title="streamsx.topology.context.ContextTypes"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContextTypes</span></code></a>.</p>
<p>The parameters <cite>username</cite> and <cite>password</cite> are only required when submitting to an
IBM Streams instance and it is required to access the Streams REST API from the
code performing the submit. Accessing data from views created by
<a class="reference internal" href="streamsx.topology.topology.html#streamsx.topology.topology.Stream.view" title="streamsx.topology.topology.Stream.view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">view()</span></code></a> requires access to the Streams REST API.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ctxtype</strong> (<em>str</em>) – Type of context the application will be submitted to. A value from <a class="reference internal" href="#streamsx.topology.context.ContextTypes" title="streamsx.topology.context.ContextTypes"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContextTypes</span></code></a>.</p></li>
<li><p><strong>graph</strong> (<a class="reference internal" href="streamsx.topology.topology.html#streamsx.topology.topology.Topology" title="streamsx.topology.topology.Topology"><em>Topology</em></a>) – The application topology to be submitted.</p></li>
<li><p><strong>config</strong> (<em>dict</em>) – Configuration for the submission, augmented with values such as a <a class="reference internal" href="#streamsx.topology.context.JobConfig" title="streamsx.topology.context.JobConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">JobConfig</span></code></a> or keys from <a class="reference internal" href="#streamsx.topology.context.ConfigParams" title="streamsx.topology.context.ConfigParams"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigParams</span></code></a>.</p></li>
<li><p><strong>username</strong> (<em>str</em>) – Deprecated: Username for the Streams REST api. Use environment variable <code class="docutils literal notranslate"><span class="pre">STREAMS_USERNAME</span></code> if using user-password authentication.</p></li>
<li><p><strong>password</strong> (<em>str</em>) – Deprecated: Password for <cite>username</cite>. Use environment variable <code class="docutils literal notranslate"><span class="pre">STREAMS_PASSWORD</span></code> if using user-password authentication.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Result of the submission. Content depends on <a class="reference internal" href="#streamsx.topology.context.ContextTypes" title="streamsx.topology.context.ContextTypes"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContextTypes</span></code></a>
constant passed as <cite>ctxtype</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#streamsx.topology.context.SubmissionResult" title="streamsx.topology.context.SubmissionResult">SubmissionResult</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="streamsx.topology.context.build">
<code class="sig-prename descclassname">streamsx.topology.context.</code><code class="sig-name descname">build</code><span class="sig-paren">(</span><em class="sig-param">topology</em>, <em class="sig-param">config=None</em>, <em class="sig-param">dest=None</em>, <em class="sig-param">verify=None</em><span class="sig-paren">)</span><a class="headerlink" href="#streamsx.topology.context.build" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a topology to produce a Streams application bundle.</p>
<p>Builds a topology using <a class="reference internal" href="#streamsx.topology.context.submit" title="streamsx.topology.context.submit"><code class="xref py py-func docutils literal notranslate"><span class="pre">submit()</span></code></a> with context type <a class="reference internal" href="#streamsx.topology.context.ContextTypes.BUNDLE" title="streamsx.topology.context.ContextTypes.BUNDLE"><code class="xref py py-const docutils literal notranslate"><span class="pre">BUNDLE</span></code></a>. The result is a sab file on the local file system along
with a job config overlay file matching the application.</p>
<p>The build uses a build service or a local install, see <a class="reference internal" href="#streamsx.topology.context.ContextTypes.BUNDLE" title="streamsx.topology.context.ContextTypes.BUNDLE"><code class="xref py py-const docutils literal notranslate"><span class="pre">BUNDLE</span></code></a> for details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>topology</strong> (<a class="reference internal" href="streamsx.topology.topology.html#streamsx.topology.topology.Topology" title="streamsx.topology.topology.Topology"><em>Topology</em></a>) – Application topology to be built.</p></li>
<li><p><strong>config</strong> (<em>dict</em>) – Configuration for the build.</p></li>
<li><p><strong>dest</strong> (<em>str</em>) – Destination directory for the sab and JCO files. Default is context specific.</p></li>
<li><p><strong>verify</strong> – SSL verification used by requests when using a build service. Defaults to enabling SSL verification.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>3-element tuple containing</p>
<ul class="simple">
<li><p><strong>bundle_path</strong> (<em>str</em>): path to the bundle (sab file) or <code class="docutils literal notranslate"><span class="pre">None</span></code> if not created.</p></li>
<li><p><strong>jco_path</strong> (<em>str</em>): path to file containing the job config overlay for the application or <code class="docutils literal notranslate"><span class="pre">None</span></code> if not created.</p></li>
<li><p><strong>result</strong> (<em>SubmissionResult</em>): value returned from <code class="docutils literal notranslate"><span class="pre">submit</span></code>.</p></li>
</ul>
</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#streamsx.topology.context.ContextTypes.BUNDLE" title="streamsx.topology.context.ContextTypes.BUNDLE"><code class="xref py py-const docutils literal notranslate"><span class="pre">BUNDLE</span></code></a> for details on how to configure the build service to use.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.14.</span></p>
</div>
</dd></dl>

<dl class="function">
<dt id="streamsx.topology.context.run">
<code class="sig-prename descclassname">streamsx.topology.context.</code><code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param">topology</em>, <em class="sig-param">config=None</em>, <em class="sig-param">job_name=None</em>, <em class="sig-param">verify=None</em>, <em class="sig-param">ctxtype='DISTRIBUTED'</em><span class="sig-paren">)</span><a class="headerlink" href="#streamsx.topology.context.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a topology in a distributed Streams instance.</p>
<p>Runs a topology using <a class="reference internal" href="#streamsx.topology.context.submit" title="streamsx.topology.context.submit"><code class="xref py py-func docutils literal notranslate"><span class="pre">submit()</span></code></a> with context type <a class="reference internal" href="#streamsx.topology.context.ContextTypes.DISTRIBUTED" title="streamsx.topology.context.ContextTypes.DISTRIBUTED"><code class="xref py py-const docutils literal notranslate"><span class="pre">DISTRIBUTED</span></code></a> (by default). The result is running Streams job.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>topology</strong> (<a class="reference internal" href="streamsx.topology.topology.html#streamsx.topology.topology.Topology" title="streamsx.topology.topology.Topology"><em>Topology</em></a>) – Application topology to be run.</p></li>
<li><p><strong>config</strong> (<em>dict</em>) – Configuration for the build.</p></li>
<li><p><strong>job_name</strong> (<em>str</em>) – Optional job name. If set will override any job name in <cite>config</cite>.</p></li>
<li><p><strong>verify</strong> – SSL verification used by requests when using a build service. Defaults to enabling SSL verification.</p></li>
<li><p><strong>ctxtype</strong> (<em>str</em>) – Context type for submission.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>2-element tuple containing</p>
<ul class="simple">
<li><p><strong>job</strong> (<em>Job</em>): REST binding object for the running job or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no job was submitted.</p></li>
<li><p><strong>result</strong> (<em>SubmissionResult</em>): value returned from <code class="docutils literal notranslate"><span class="pre">submit</span></code>.</p></li>
</ul>
</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#streamsx.topology.context.ContextTypes.DISTRIBUTED" title="streamsx.topology.context.ContextTypes.DISTRIBUTED"><code class="xref py py-const docutils literal notranslate"><span class="pre">DISTRIBUTED</span></code></a> for details on how to configure the Streams instance to use.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.14.</span></p>
</div>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="streamsx.topology.schema.html" class="btn btn-neutral float-right" title="streamsx.topology.schema" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="streamsx.topology.topology.html" class="btn btn-neutral float-left" title="streamsx.topology.topology" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015,2020 IBM Corp.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>