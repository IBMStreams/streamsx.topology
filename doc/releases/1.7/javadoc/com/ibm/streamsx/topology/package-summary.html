<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0) on Tue Oct 10 09:59:07 PDT 2017 -->
<title>com.ibm.streamsx.topology (Java Application API for IBM Streams)</title>
<meta name="date" content="2017-10-10">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="com.ibm.streamsx.topology (Java Application API for IBM Streams)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div role="navigation" title ="TOP_Navigation" aria-label ="Top Navigation Bar"/>
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/ibm/streamsx/rest/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../../com/ibm/streamsx/topology/consistent/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/ibm/streamsx/topology/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div role="main" title ="com.ibm.streamsx.topology" aria-labelledby ="Header1"/>
<div class="header">
<h1 title="Package" class="title" id="Header1">Package&nbsp;com.ibm.streamsx.topology</h1>
<div class="docSummary">
<div class="block">Java application API for IBM Streams.</div>
</div>
<p>See:&nbsp;<a href="#package.description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../com/ibm/streamsx/topology/TopologyElement.html" title="interface in com.ibm.streamsx.topology">TopologyElement</a></td>
<td class="colLast">
<div class="block">Any element in a <a href="../../../../com/ibm/streamsx/topology/Topology.html" title="class in com.ibm.streamsx.topology"><code>Topology</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../com/ibm/streamsx/topology/TSink.html" title="interface in com.ibm.streamsx.topology">TSink</a></td>
<td class="colLast">
<div class="block">A handle to the <code>sink</code> of a <code>TStream</code>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../com/ibm/streamsx/topology/TStream.html" title="interface in com.ibm.streamsx.topology">TStream</a>&lt;T&gt;</td>
<td class="colLast">
<div class="block">A <code>TStream</code> is a declaration of a continuous sequence of tuples.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../com/ibm/streamsx/topology/TWindow.html" title="interface in com.ibm.streamsx.topology">TWindow</a>&lt;T,K&gt;</td>
<td class="colLast">
<div class="block">Declares a window of tuples for a <a href="../../../../com/ibm/streamsx/topology/TStream.html" title="interface in com.ibm.streamsx.topology"><code>TStream</code></a>.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../com/ibm/streamsx/topology/Topology.html" title="class in com.ibm.streamsx.topology">Topology</a></td>
<td class="colLast">
<div class="block">A declaration of a topology of streaming data.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Enum Summary table, listing enums, and an explanation">
<caption><span>Enum Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Enum</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../com/ibm/streamsx/topology/TStream.Routing.html" title="enum in com.ibm.streamsx.topology">TStream.Routing</a></td>
<td class="colLast">
<div class="block">Enumeration for routing tuples to parallel channels.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="Package com.ibm.streamsx.topology Description">Package com.ibm.streamsx.topology Description</h2>
<div class="block">Java application API for IBM Streams.
 
 This API is used to generate streaming topologies for
 execution by IBM Streams 4.0.1 or later. An instance
 of <a href="../../../../com/ibm/streamsx/topology/Topology.html" title="class in com.ibm.streamsx.topology"><code>Topology</code></a> is created
 that then is used to build a topology (or graph) of
 streams, represented by <a href="../../../../com/ibm/streamsx/topology/TStream.html" title="interface in com.ibm.streamsx.topology"><code>TStream</code></a>
 instances. This topology is the declaration of the application,
 and it may then be :
 <UL>
 <LI>Submitted to an IBM Streams instance.</LI>
 <LI>Executed as an IBM Streams standalone application.</LI>
 <LI>Compiled into an IBM Streams application bundle (<code>.sab</code> file).</LI>
 <LI>Executed within the local JVM (not all toppologies are supported).</LI>
 </UL>
 
 A <a href="../../../../com/ibm/streamsx/topology/TStream.html" title="interface in com.ibm.streamsx.topology"><code>TStream</code></a> represents a continuous stream of tuples
 with a specific type <code>T</code>. Streams are transformed into
 new streams through functional transformations, defined using
 a single method of an interface like <a href="../../../../com/ibm/streamsx/topology/function/Function.html" title="interface in com.ibm.streamsx.topology.function"><code>Function</code></a>.
 <P>
 A transformation consists of an instance of a functional interface,
 known as the <i>functional logic</i>
 and how that logic is applied against tuples on the stream.
 
 The method on <code>TStream</code> the <i>functional logic</i> is
 passed into to create a new stream, declares how the <i>functional logic</i>
 is applied, for example:
 <UL>
 <LI>
  <a href="../../../../com/ibm/streamsx/topology/TStream.html#filter-com.ibm.streamsx.topology.function.Predicate-"><code>TStream.filter(com.ibm.streamsx.topology.function.Predicate)</code></a> declares that the <i>functional logic</i> will be
  called for each tuple on the stream, and if it returns <code>true</code> then the
  input tuple is submitted to the new stream, otherwise the input tuple is discarded.
 </LI>
 <LI>
 <a href="../../../../com/ibm/streamsx/topology/TStream.html#transform-com.ibm.streamsx.topology.function.Function-"><code>TStream.transform(com.ibm.streamsx.topology.function.Function)</code></a> declares that the <i>functional logic</i> will be
  called for each tuple and its return value will be submitted to the output stream, unless
  it is <code>null</code>, in which case no tuple will be submitted.
 </LI>
 </UL>
 <h3>Functional Logic semantics</h3>
 <h4>Declaring Functional Logic</h4>
 When declaring (building) the topology any <i>functional logic</i> is an instance
 of a Java interface, such as <a href="../../../../com/ibm/streamsx/topology/function/Predicate.html" title="interface in com.ibm.streamsx.topology.function"><code>Predicate</code></a>.
 These objects are <b> always </b> serialized and deserialized before being
 executed against tuples on streams, regardless of the type of the <code>StreamsContext</code>.
 <BR>
 <UL>
 <LI> If the instance is declared using an anonymous class then it should be declared in
 a static context (e.g. static method). If the anonymous class is <b>not</b> declared in a
 static context then it will also capture the reference of the object that declares it,
 typically this object (the code declaring the topology) will not be serializable,
 and is not required by the anonymous class for execution.
 </li>
 <ul>
 <li>
 The code declaring the topology passes parameters into an anonymous class by
 having local variables or method parameters that are <code>final</code> and thus
 can be captured by the anonymous class.
 </li>
 <li>
 The code within an anonymous class must not reference any static fields set up
 by the code declaring the topology, as the code declaring the topology
 is not executed when the topology itself is executed. For example a method
 in an anonymous class that references a static file name set when
 declaring the topology, will not see that value when executing at runtime.
 </li>
 </ul>
 <li>
 When the functional logic is deserialized before being executed at runtime,
 its constructor is not called. Thus any transient fields either need to
 be initialized on their first use or using the Java serialization hooks
 <code>readObject()</code> or <code>readResolve()</code>. The sample <code>RegexGrep</code>
 has an example of this.
 </li>
 <li>
 A single deserialized instance of functional logic is called for all tuples on each
 <a href="../../../../com/ibm/streamsx/topology/TStream.html#parallel-int-"><code>parallel channel</code></a>, when the stream is not parallelized
 a single instance is called.
 </li>
 </UL>
 <h4>Synchronization of Functional Logic</h4>
 <UL>
 <LI>
 Call to a functional logic are not executed concurrently. 
 </LI>
 <LI>
 Each call to a functional logic <i>happens-before</i> any subsequent call to it. 
 </LI>
 </UL>
 <BR>
 Thus there is no need for a functional logic to have synchronization to protect state
 from multiple concurrent calls or to ensure visibility.
 
 <h4>Stateful Functional Logic</h4>
 A functional logic instance lives for the lifetime of its container (embedded JVM, standalone process
 or processing element in distributed mode),
 thus it may maintain state across the invocations of its method. For a de-duplicating
 <a href="../../../../com/ibm/streamsx/topology/function/Predicate.html" title="interface in com.ibm.streamsx.topology.function"><code>Predicate</code></a> may maintain a collection of
 previously seen tuples on the stream to filter out duplicates.
 <BR>
 In distributed mode, if a processing element (PE) restarts then any state will be lost and
 a new functional logic instance set to its initial deserialized state is created.
 <BR>
 For future compatibility:
 <ul>
 <li>
 any state that should not be persisted on a checkpoint
 must be marked as <code>transient</code>, such as connections to external systems.</li>
 <li>
 any non-changing instance fields should be marked as <code>final</code>.
 </li>
 </ul>
 <H3>Pass by reference semantics for tuples</H3>
 Where possible, tuples are passed by reference from one stream to another,
 thus in a general case, a tuple (as a Java object) is returned from one
 <i>functional logic</i> instance and passed into one or more downstream <i>functional logic</i>
 instances, using its reference.
 For example, with the flow:
 <BR>
 <code>s.transform(trans1).filter(filt).transform(trans2)</code>
 <BR>
 a tuple <code>t</code> returned from <code>trans1.apply(t)</code>
 may be passed directly as <code>filt.test(t)</code> and to <code>trans2.apply(t)</code> if
 the former returned <code>true</code>.
 <BR>
 When a tuple is not, or can not, be passed by reference, for example
 when <i>functional logic</i> instances are being executed on different
 hosts in a distributed environment, then the tuple object will passed using
 serialization and de-serialization.
 <H4>Ensuring consistent behavior</H4>
 To ensure consistent behavior regardless of how the topology is executed,
 these recommendations should be followed:
 <UL>
 <LI>
 Where possible <code>TStream</code> types should be immutable, which means any downstream
 <i>functional logic</i> cannot modify any tuple through its reference. Thus a
 reference to a tuple may be safely passed to multiple downstream <i>functional logic</i>
 instances.
 </LI>
 <LI>
 Any <i>functional logic</i> discards any reference to any mutable returned item, thus any
 change made to an mutable tuple object are not seen by any upstream <i>functional logic</i>.
 </LI>
 <LI>
 Any <i>functional logic</i> discards any reference to any mutable argument when it returns
 from its method.</i>.
 </LI>
 </UL>
  <h3>Included Libraries</h3>
  This API requires the IBM Streams Java Operator API
  which results in these libraries in the class path:
  <UL>
  <LI>
  <a target="_blank" href="http://www-01.ibm.com/support/knowledgecenter/SSCRJU_4.0.0/com.ibm.streams.spl-java-operators.doc/api/overview-summary.html">IBM Streams Java Operator API</a> - <code>$STREAMS_INSTALL/lib/com.ibm.streams.operator.jar</code></LI>
  <LI>
  <a target="_blank" href="http://www-01.ibm.com/support/knowledgecenter/SSCRJU_4.0.0/com.ibm.streams.spl-java-operators.doc/samples/overview-summary.html">IBM Streams Java Operator samples</a> - <code>$STREAMS_INSTALL/lib/com.ibm.streams.operator.samples.jar</code></LI>
  <LI><a target="_blank" href="http://commons.apache.org/proper/commons-math/javadocs/api-2.2/index.html">Apache Commons Math 2.2</a> - <code>$STREAMS_INSTALL/ext/lib/commons-math-2.1.jar</code></LI>
  <LI><a target="_blank" href="https://logging.apache.org/log4j/1.2/apidocs/">Apache Log4j 1.2.17</a> - <code>$STREAMS_INSTALL/ext/lib/log4j-1.2.17.jar</code></LI>
  <LI><a target="_blank" href="http://www-01.ibm.com/support/knowledgecenter/api/content/SS7K4U_8.5.5/com.ibm.websphere.javadoc.liberty.doc/com.ibm.websphere.appserver.api.json_1.0-javadoc/index.html">JSON4J</a> - <code>$STREAMS_INSTALL/ext/lib/JSON4J.jar</code></LI>
  </UL></div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div role="navigation" title ="Bottom_NAVIGATION" aria-label ="Bottom Navigation Bar"/>
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">streamsx.topology 1.7 @ IBMStreams GitHub</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/ibm/streamsx/rest/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../../com/ibm/streamsx/topology/consistent/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/ibm/streamsx/topology/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
