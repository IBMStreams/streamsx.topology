<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="@spl.source"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="spldoc_page"/>
<link rel="stylesheet" type="text/css" href="../../html/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../../html/spldoc.css"/>
<title>@spl.source</title>
</head>
<body id="spldoc_page">


<h1 class="title topictitle1">@spl.source</h1>

<div class="body refbody">
<div class="section">
<p class="p">
<a class="xref" href="../toolkits/toolkits.html">Toolkits</a> &gt; <a class="xref" href="tk$com.ibm.streamsx.topology.html">com.ibm.streamsx.topology 1.14.11</a> &gt; <a class="xref" href="ns$com.ibm.streamsx.topology.python.html">com.ibm.streamsx.topology.python</a> &gt; <a class="xref" href="ns$com.ibm.streamsx.topology.python$4.html">Creating SPL Operators from Python code</a> &gt; @spl.source</p>

</div>


<div class="section">
<p class="p">Decorator to create a stateful or stateless SPL source operator from a Python iterable class or function. A source operator has a single output port. The decorated Python class or function is used to create an <em class="ph i">iterator</em>. Once the SPL operator has been notified of all ports ready then it iterates over the <em class="ph i">iterator</em>. For each value returned by the iterator zero or more SPL tuples are submitted to the output port. It a value is <tt class="ph tt">None</tt> then no tuple is submitted. Otherwise the value is converted into zero or more SPL tuples which are submitted to the output port.
</p>

<p class="p">When a Python tuple is submitted as an SPL tuple then if there are less values in the Python tuple than attributes in the SPL tuple's schema then the remaining SPL attributes are set to their default value.
</p>

<p class="p">When the <em class="ph i">iterator</em> completes, a window mark followed by a final mark are submitted to the output port and no more tuples are submitted to the output port.
</p>

</div>

<div class="section"><h2 class="title sectiontitle">Decorated iterable class
</h2>

<p class="p">When a Python <em class="ph i">iterable class</em> is decorated with <tt class="ph tt">@spl.source</tt> a stateful SPL source operator is created.
</p>

<p class="p">When the SPL operator is initialized <tt class="ph tt">__init__</tt> is called to create an instance of the class which is an iterable. Then <tt class="ph tt">iter(instance)</tt> is called to create the <em class="ph i">iterator</em> from the <em class="ph i">iterable</em>.
</p>

<p class="p">If the class has instance fields then they are the state of the operator and are private to each invocation of the operator and maintained across calls to its <tt class="ph tt">__call__</tt> function.
</p>

<p class="p">Example decorated class creating a SPL source operator with parameters that produces a finite sequence as its output stream.
</p>

<div class="p">
<pre class="pre codeblock">
@spl.source
class Range:
  def __init__(self, stop, start=0):
    self.start = start
    self.stop = stop

  def __iter__(self):
      return zip(range(self.start, self.stop))
</pre>


</div>

</div>

<div class="section"><h2 class="title sectiontitle">Decorated function
</h2>

<p class="p">When a Python <em class="ph i">function</em> is decorated with <tt class="ph tt">@spl.source</tt> a stateless SPL source operator is created.
</p>

<p class="p">When the SPL operator is initialized the decorated function is called and <tt class="ph tt">iter(value)</tt> is called on the return value to create the <em class="ph i">iterator</em>.
</p>

<p class="p">Example decorated class creating a SPL source operator with parameters that produces a finite sequence of <tt class="ph tt">0-199</tt> as its output stream.
</p>

<div class="p">
<pre class="pre codeblock">
@spl.source
def Range()
  return zip(range(200))
</pre>


</div>

</div>

<div class="section"><h2 class="title sectiontitle">SPL output tuples
</h2>

<p class="p">When a Python value from the <em class="ph i">iteration</em>  does not provide values for all the attributes of the output port, then any unset values are set to the default value for the type, zero, empty string or empty collection.
</p>

</div>

</div>


</body>
</html>