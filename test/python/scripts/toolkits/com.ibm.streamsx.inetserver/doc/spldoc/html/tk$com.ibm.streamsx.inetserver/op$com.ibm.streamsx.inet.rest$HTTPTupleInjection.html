<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="Operator HTTPTupleInjection"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="spldoc_operator"/>
<link rel="stylesheet" type="text/css" href="../../html/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../../html/spldoc.css"/>
<title>Operator HTTPTupleInjection</title>
</head>
<body id="spldoc_operator">


<h1 class="title topictitle1">Operator <tt class="ph tt">HTTPTupleInjection</tt></h1>

<div class="body refbody">
<div class="section">
<p class="p">
<a class="xref" href="../toolkits/toolkits.html">IBMStreams com.ibm.streamsx.inetserver Toolkit</a> &gt; <a class="xref" href="tk$com.ibm.streamsx.inetserver.html">com.ibm.streamsx.inetserver 3.0.0</a> &gt; <a class="xref" href="ns$com.ibm.streamsx.inet.rest.html">com.ibm.streamsx.inet.rest</a> &gt; HTTPTupleInjection</p>

</div>

<div class="section splprimop">
  <embed class="image" src="../../image/tk$com.ibm.streamsx.inetserver/op$com.ibm.streamsx.inet.rest$HTTPTupleInjection.svg" width="872" height="112"/>
</div>

<div class="section">

<p class="p">Embeds a Jetty web server to allow HTTP or HTTPS POST requests to submit a tuple on its output ports. Each output port corresponds to a unique URL comprising the operator name and the port index.
</p>

<p class="p">A single tuple is generated for an incoming POST request. Each attribute in the output port's schema corresponds to a parameter in the POST with the attribute name, using <tt class="ph tt">application/x-www-form-urlencoded</tt>. If the parameter exists in the POST then its first value is assigned to the output tuple, if the value is not provided then the attribute will be set to its default value.
</p>

<p class="p">In addition to the URL for POST request, a URL is created that displays an automatically generated HTML form that can be displayed by a browser and used for manual injection of tuples.
</p>

<div class="p">The URLs defined by this operator are:
<ul class="ul">
<li class="li"> <em class="ph i">prefix</em><tt class="ph tt">/ports/output/</tt><em class="ph i">port index</em><tt class="ph tt">/inject</tt> - Accepts POST requests of type <tt class="ph tt">application/x-www-form-urlencoded</tt>.</li>

<li class="li"> <em class="ph i">prefix</em><tt class="ph tt">/ports/output/</tt><em class="ph i">port index</em><tt class="ph tt">/form</tt> - HTML web form that can be used to test tuple submission.</li>

<li class="li"> <em class="ph i">prefix</em><tt class="ph tt">/ports/output/</tt><em class="ph i">port index</em><tt class="ph tt">/info</tt> - Output port meta-data including the stream attribute names and types (content type <tt class="ph tt">application/json</tt>).</li>

</ul>

</div>

<div class="p">The <em class="ph i">prefix</em> for the URLs is:
<ul class="ul">
<li class="li"> <em class="ph i">context path</em><tt class="ph tt">/</tt><em class="ph i">base operator name</em> - When the <tt class="ph tt">context</tt> parameter is set.</li>

<li class="li"> <em class="ph i">full operator name</em> - When the <tt class="ph tt">context</tt> parameter is <strong class="ph b">not</strong> set.</li>

</ul>

</div>

<p class="p"><strong class="ph b">Maximum Content Size</strong>: Jetty limits the amount of data that can post back from a browser or other client to this operator. This helps protect the operator against denial of service attacks by malicious clients sending huge amounts of data. The default limit is 200K bytes, a client will receive an HTTP 500 error response code if it tries to POST too much data. The limit may be increased using the <tt class="ph tt">maxContentSize</tt> parameter.
</p>

<div class="p"><strong class="ph b">Limitations</strong>:
<ul class="ul">
<li class="li"> Error handling is limited, incorrect URLs can crash the application.</li>

<li class="li"> Not all SPL data types are supported. String, signed integer and float types are supported for POST parameters. Output port may contain other types but will be set</li>

</ul>
to their default values.
<ul class="ul">
<li class="li"> By default no security access is provided to the data, HTTPS must be explicitly configured.</li>

</ul>

</div>

</div>

<div class="section"><h2 class="title sectiontitle splhead-1">Summary</h2>

<dl class="dl" compact="compact">
 
  <dt class="dt dlterm">Ports</dt>

  <dd class="dd">This operator has 0 input ports and 1 or more output ports.</dd>

 
 
  <dt class="dt dlterm">Windowing</dt>

  <dd class="dd">This operator does not accept any windowing configurations.</dd>

 
 
  <dt class="dt dlterm">Parameters</dt>

  <dd class="dd">This operator supports 10 parameters.
<p class="p"> Optional: 
<a class="xref" href="#spldoc_operator__parameter__certificateAlias">certificateAlias</a>, <a class="xref" href="#spldoc_operator__parameter__context">context</a>, <a class="xref" href="#spldoc_operator__parameter__contextResourceBase">contextResourceBase</a>, <a class="xref" href="#spldoc_operator__parameter__keyPassword">keyPassword</a>, <a class="xref" href="#spldoc_operator__parameter__keyStore">keyStore</a>, <a class="xref" href="#spldoc_operator__parameter__keyStorePassword">keyStorePassword</a>, <a class="xref" href="#spldoc_operator__parameter__maxContentSize">maxContentSize</a>, <a class="xref" href="#spldoc_operator__parameter__port">port</a>, <a class="xref" href="#spldoc_operator__parameter__trustStore">trustStore</a>, <a class="xref" href="#spldoc_operator__parameter__trustStorePassword">trustStorePassword</a>

</p>
</dd>

 
 
  <dt class="dt dlterm">Metrics</dt>

  <dd class="dd">This operator reports 2 metrics.</dd>

 
</dl>
</div>

<div class="section"><h2 class="title sectiontitle splhead-1">Properties</h2>

<dl class="dl" compact="compact">
 
  <dt class="dt dlterm">Implementation</dt>

  <dd class="dd">Java</dd>

 
</dl>

</div>

<div class="section">
<p class="p splhead-1"><strong class="ph b"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__output_port_set">Output Ports</a></strong></p>
<dl class="dl">
  
     <dt class="dt dlterm">Assignments</dt>

       <dd class="dd">Java operators do not support output assignments.
       </dd>

  
</dl>

<dl class="dl">
  
   <dt class="dt dlterm">Ports (0)</dt>

   <dd class="dd">

<p class="p">Emits a tuple for each POST request on the inject URL with port index 0
</p>

<p class="p"/>

   <dl class="dl">
    
      <dt class="dt dlterm">Properties</dt>

      <dd class="dd">
   <ul class="sl simple">
     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__output_port_set__optional">Optional</a>: false
     </li>

   </ul>

   <ul class="sl simple">
     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__output_port_set__windowpunctuationoutputmode">WindowPunctuationOutputMode</a>: Free
     </li>

   </ul>

      </dd>

    
   </dl>

   <p class="p"/>

   </dd>

  
  
   <dt class="dt dlterm">Ports (1...)</dt>

   <dd class="dd">

<p class="p">Optional additional ports that emit a tuple for each POST request on the inject URL with the corresponding port index
</p>

   <p class="p"/>

   <dl class="dl">
    
      <dt class="dt dlterm">Properties</dt>

      <dd class="dd">
   <ul class="sl simple">
     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__output_port_set__windowpunctuationoutputmode">WindowPunctuationOutputMode</a>: Free
     </li>

   </ul>

      </dd>

    
   </dl>

   <p class="p"/>

   </dd>

  
</dl>

</div>

<div class="section">
<p class="p splhead-1"><strong class="ph b"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters">Parameters</a></strong></p>
This operator supports 10 parameters.
<p class="p"> Optional: 
<a class="xref" href="#spldoc_operator__parameter__certificateAlias">certificateAlias</a>, <a class="xref" href="#spldoc_operator__parameter__context">context</a>, <a class="xref" href="#spldoc_operator__parameter__contextResourceBase">contextResourceBase</a>, <a class="xref" href="#spldoc_operator__parameter__keyPassword">keyPassword</a>, <a class="xref" href="#spldoc_operator__parameter__keyStore">keyStore</a>, <a class="xref" href="#spldoc_operator__parameter__keyStorePassword">keyStorePassword</a>, <a class="xref" href="#spldoc_operator__parameter__maxContentSize">maxContentSize</a>, <a class="xref" href="#spldoc_operator__parameter__port">port</a>, <a class="xref" href="#spldoc_operator__parameter__trustStore">trustStore</a>, <a class="xref" href="#spldoc_operator__parameter__trustStorePassword">trustStorePassword</a>

</p>
<dl class="dl">

<dt class="dt dlterm"><a name="spldoc_operator__parameter__certificateAlias"><!-- --></a><tt class="ph tt">certificateAlias</tt></dt>

<dd class="dd">
<p class="p">Alias of the certificate to use in the key store. When this parameter is set all connections use HTTPS.
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: rstring
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__context"><!-- --></a><tt class="ph tt">context</tt></dt>

<dd class="dd">
<p class="p">Define a URL context path that maps to the resources defined by<tt class="ph tt">contextResourceBase</tt>. This allows a composite that invokes this operator in a toolkit to provide resources regardless of the value of the application's data directory. For example setting it to <em class="ph i">maps</em> would result in the URL <em class="ph i">/maps/index.html</em> mapping to the file <em class="ph i">index.html</em> in the directory defined by <tt class="ph tt">contextResourceBase</tt>. Requires the parameter <tt class="ph tt">contextResourceBase</tt> to be set. If when the operator is initialized the context already exists then no action is taken. This allows multiple independent composites in the same toolkit to have common <tt class="ph tt">context</tt> and <tt class="ph tt">contextResourceBase</tt> settings, typically to point to a single set of HTML and Javascript resources for the toolkit.
</p>

<p class="p">If the operator provides URLs for its input or output ports then they are placed in the this context when this parameter is set. This then provides fixed locations for the URLs regardless of the depth of the operator invocation in the main composite.
</p>

<p class="p">Only a single context per invocation is supported.
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: rstring
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__contextResourceBase"><!-- --></a><tt class="ph tt">contextResourceBase</tt></dt>

<dd class="dd">
<p class="p">Directory location of resources that will be available through the the URL context defined by the parameter <tt class="ph tt">context</tt>. Typically used to allow a toolkit to provide a set of resources in a fixed location. The set of resources is recommended to be stored in the application_dir/opt directory, which is automatically included in the bundle by default. Path of this directory can be absolute or relative, if relative path is specified then it is relative to the application directory. A set of default resources is included in the toolkit directory under ToolkitDir/opt/resources and will be loaded by the operator. This default resources can be viewed at <tt class="ph tt">http://hostname:8080/streamsx.inet.resources</tt>. A path within the application is obtained using the SPL function <tt class="ph tt">getThisToolkitDir()</tt>. Thus a composite in the file <em class="ph i">maps.spl</em> in the namespace directory <tt class="ph tt">com.acme.streams.apps.map</tt> might have the following setting to map <tt class="ph tt">http://127.0.0.1:8080/maps</tt> to <tt class="ph tt">opt/resources/mapinfo</tt> in the application.
</p>

<div class="p">
<pre class="pre codeblock">
param
  context: “maps”
  contextResourceBase: getThisToolkitDir() + “/opt/resources/mapinfo”
</pre>


</div>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: rstring
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__keyPassword"><!-- --></a><tt class="ph tt">keyPassword</tt></dt>

<dd class="dd">
<p class="p">Password to the certificate. If not provided, defaults to the value of <tt class="ph tt">keyStorePassword</tt>.
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: rstring
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__keyStore"><!-- --></a><tt class="ph tt">keyStore</tt></dt>

<dd class="dd">
<p class="p">URL to the key store containing the certificate. If a relative file path then it is taken as relative to the application directory.
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: rstring
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__keyStorePassword"><!-- --></a><tt class="ph tt">keyStorePassword</tt></dt>

<dd class="dd">
<p class="p">Password to the key store.
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: rstring
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__maxContentSize"><!-- --></a><tt class="ph tt">maxContentSize</tt></dt>

<dd class="dd">
<p class="p">Change the maximum HTTP POST content size (K bytes) allowed by this operator.Jetty limits the amount of data that can posted from a browser or other client to the operator. This helps protect the operator against denial of service attacks by malicious clients sending huge amounts of data. The default maximum size Jetty permits is 200K bytes, thus the default value for this parameter is 200. For example, to increase to 500,000 bytes set maxContentSize to 500.
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: int32
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__port"><!-- --></a><tt class="ph tt">port</tt></dt>

<dd class="dd">
<p class="p">Port number for the embedded Jetty HTTP server. Defaults to 8080.
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: int32
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__trustStore"><!-- --></a><tt class="ph tt">trustStore</tt></dt>

<dd class="dd">
<p class="p">URL to the trust store containing client certificates. If a relative file path then it is taken as relative to the application directory. When this parameter is set, client authentication is required.
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: rstring
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__trustStorePassword"><!-- --></a><tt class="ph tt">trustStorePassword</tt></dt>

<dd class="dd">
<p class="p">Password to the trust store.
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: rstring
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>


</dl>

</div>

<div class="section">
<p class="p splhead-1"><strong class="ph b"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__context__metrics">Metrics</a></strong></p>
<dl class="dl">
  
    <dt class="dt dlterm"><tt class="ph tt">https</tt> - <a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__context__metrics_kind_gauge">Gauge</a></dt>

    <dd class="dd">

<p class="p">Jetty SSL/TLS status: 0=HTTP, 1=HTTPS
</p>

     <p class="p"/>

     </dd>

  
  
    <dt class="dt dlterm"><tt class="ph tt">serverPort</tt> - <a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__context__metrics_kind_gauge">Gauge</a></dt>

    <dd class="dd">

<p class="p">Jetty (HTTP/HTTPS) server port
</p>

     <p class="p"/>

     </dd>

  
</dl>

</div>

<div class="section">
<p class="p splhead-1"><strong class="ph b"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__context__dependencies">Libraries</a></strong></p>

 <dl class="dl">
 
  <dt class="dt dlterm">Operator class library
  </dt>

  <dd class="dd"/>

  <dd class="dd"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__context__dependencies__managedlibrary__libpath">Library Path</a>: <tt class="ph tt">../../impl/lib/com.ibm.streamsx.inetserver.jar</tt></dd>

 
 </dl>

</div>

</div>


</body>
</html>