<!-- begin_generated_IBM_copyright_prolog                             -->
<!--                                                                  -->
<!-- This is an automatically generated copyright prolog.             -->
<!-- After initializing,  DO NOT MODIFY OR MOVE                       -->
<!-- **************************************************************** -->
<!-- THIS SAMPLE CODE IS PROVIDED ON AN "AS IS" BASIS. IBM MAKES NO   -->
<!-- REPRESENTATIONS OR WARRANTIES, EXPRESS OR IMPLIED, CONCERNING    -->
<!-- USE OF THE SAMPLE CODE, OR THE COMPLETENESS OR ACCURACY OF THE   -->
<!-- SAMPLE CODE. IBM DOES NOT WARRANT UNINTERRUPTED OR ERROR-FREE    -->
<!-- OPERATION OF THIS SAMPLE CODE. IBM IS NOT RESPONSIBLE FOR THE    -->
<!-- RESULTS OBTAINED FROM THE USE OF THE SAMPLE CODE OR ANY PORTION  -->
<!-- OF THIS SAMPLE CODE.                                             -->
<!--                                                                  -->
<!-- LIMITATION OF LIABILITY. IN NO EVENT WILL IBM BE LIABLE TO ANY   -->
<!-- PARTY FOR ANY DIRECT, INDIRECT, SPECIAL OR OTHER CONSEQUENTIAL   -->
<!-- DAMAGES FOR ANY USE OF THIS SAMPLE CODE, THE USE OF CODE FROM    -->
<!-- THIS [ SAMPLE PACKAGE,] INCLUDING, WITHOUT LIMITATION, ANY LOST  -->
<!-- PROFITS, BUSINESS INTERRUPTION, LOSS OF PROGRAMS OR OTHER DATA   -->
<!-- ON YOUR INFORMATION HANDLING SYSTEM OR OTHERWISE.                -->
<!--                                                                  -->
<!-- (C) Copyright IBM Corp. 2016, 2016  All Rights reserved.         -->
<!--                                                                  -->
<!-- end_generated_IBM_copyright_prolog                               -->
<project name="streamsx.topology.sample.python" default="all" >
    <description>
        Build the sample python toolkit.
    </description>

  <property environment="env"/>
  <fail unless="env.STREAMS_INSTALL" message="STREAMS_INSTALL not set."/>
  <property name="streams.install" value="${env.STREAMS_INSTALL}"/>
  <property name="tk" location="../../com.ibm.streamsx.topology"/>
  <property name="pytk" location="com.ibm.streamsx.topology.pysamples"/>

  <target name="all" depends="spldoc,extract"/>

  <target name="extract">
   <exec executable="python3">
     <arg value="${tk}/bin/spl-python-extract.py"/>
     <arg value="-i"/>
     <arg value="${pytk}"/>
   </exec>

   <exec executable="${streams.install}/bin/spl-make-toolkit">
     <arg value="--make-operator"/>
     <arg value="-i"/>
     <arg value="${pytk}"/>
   </exec>
   </target>

   <target name="spldoc" depends="extract">
   <exec executable="${streams.install}/bin/spl-make-doc">
     <arg value="--include-composite-operator-diagram"/>
     <arg value="-i"/>
     <arg value="${pytk}"/>
   </exec>
   </target>

  <target name="clean" >
    <delete dir="${pytk}/output"/>
    <delete dir="${pytk}/doc"/>
    <delete dir="${pytk}/opt/.__splpy"/>
    <delete file="${pytk}/toolkit.xml"/>
    <delete includeemptydirs="true" >
       <fileset dir="${pytk}">
          <include name="com.ibm.streamsx.topology.pysamples.mail/**"/>
          <include name="com.ibm.streamsx.topology.pysamples.positional/**"/>
          <include name="opt/.__splpy/**"/>
          <exclude name="**/namespace-info.spl"/>
       </fileset>
    </delete>
  </target>

</project>
