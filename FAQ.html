<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Streamsx.topology</title>
    <style>
      .toc .h3 {
      font-size: 16px;
      margin-top: 0px;
      margin botton: 8px;
      }
      .toc .h4 {
      font-size: 16px;
      margin-left: 0em;
      }

    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="stylesheets/bootstrap.css" media="screen">
    <link rel="stylesheet" href="stylesheets/bootswatch.min.css">


    <!-- <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
         <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
         <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
         <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen"> -->

  </head>
  <body>
    <div class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <a href="index.html" class="navbar-brand">streamsx.topology</a>
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div class="navbar-collapse collapse" id="navbar-main">
          <ul class="nav navbar-nav">
            <li>
              <a href="https://github.com/Ibmstreams/streamsx.topology/releases">Releases</a>
            </li>
            <li>
              <a href="doc.html">Documentation</a>
            </li>
            <li>
              <a href="FAQ.html">FAQ</a>
            </li>
          </ul>

          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://github.com/IBMStreams" target="_blank">An IBM Streams Project</a></li>
            <li><a href="https://github.com/IBMStreams/streamsx.topology" target="_blank">Project Page</a></li>
          </ul>

        </div>
      </div>
    </div>

    <!-- Begin main content -->

    <div class="container">
      <div class="page-header" id="banner">
        <div class="row">
        </div>
      </div>

      <section class="main-content">

<h3> Table of contents</h3>
<div class="toc" id="toc">
</div>      
        <h3>
                <a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span class="octicon octicon-link"></span></a>Java Application API FAQ</h3>

<h4>What languages can I use to develop applications for IBM Streams?</h4>
Python, Java, Scala or SPL. Java and Scala use the Java Application API provided by
this toolkit. SPL is the native language for IBM Streams,
<a href="https://ibmstreams.github.io/streamsx.documentation/docs/spl/quick-start/qs-0/">here's a getting start guide</a>.
<br>
<h4>What version of IBM Streams do I need to be running to use the Java Application API?</h4>
The Java Application API uses IBM Streams 4.0.1.0 or later.
<br>
<h4>Can I use Java 8 lambda functions with the Java Application API?</h4>
Yes, IBM Streams 4.0.1 or later includes and supports Java 8. 
<h4>How do I submit to a Streams instance that requires authentication?</h4>
Create the application bundle using the BUNDLE context and then submit using streamtool submitjob or Streams Console.
Direct submission with authentication will be supported in the future.
<h4>I'm having issues reading and writing to files that I defined/initialized in my main() method. What gives?</h4>

Any Java object that your application references must be statically initialized. For example the following approach to initializing a file would be invalid:
<pre><code>
public static BufferedWriter writer = null;
public static void main(String[] args){
writer = Files.newBufferedWriter("myFile.txt", charset);
...
myStream.sink(new FunctionV() {        
        @Override
        public void accept(String v) {
            writer.write(v);
        }
    });
...
}
</pre></code>
That approach would fail because the writer variable is accessed statically by the application, so it would be seen as null. The following would be one way of properly initializing <i>writer</i>:
<pre><code>
public static BufferedWriter writer = null;
static{
    BufferedWriter tmp = null;
    try{
        Charset charset = Charset.forName("US-ASCII");
        final Path outfile = (new File("outfile.txt")).toPath();
        tmp = Files.newBufferedWriter(outfile, charset);
    } catch(Exception e){
        e.printStackTrace();
    }
    writer = tmp;
}

public static void main(String argv[]){...}
</code></pre>
<br>
<h4>I need to do some initialization in one of my stream transformations when running in standalone or distributed. How can I do this?</h4>
If you need to initialize state for one of your stream operations (such as opening a file or a database connection), implement a readResolve() method in the body of the transformation. When your application is loaded, the readResolve() method is invoked once before other methods. 
<br><br>
In the RegexGrep sample that can be found in the documentation, the readResolve() method is used to initialize a Matcher object to look for regular expressions within a string:
<pre><code>
    TStream<String> filtered = lines.filter(new Predicate<String>() {
	
	@Override
	public boolean test(String v1) {
		// Pass the line through if it matches the
		// regular expression pattern
		return matcher.reset(v1).matches();
	}

	// Recreate the matcher (which is not serializable)
	// when the object is deserialized using readResolve.
	transient Matcher matcher;

	/*
	 * Since the constructor is no invoked after serialization
	 * we use readResolve as a hook to execute initialization
	 * code, in this case creating the matcher from the
	 * pattern. 
	 * The alternative would be to create it on its first use,
	 * which would require an if statement in the test method.
	 */
	private Object readResolve() throws ObjectStreamException {
		matcher = pattern.matcher("");
		return this;
	}
});
</code></pre>

You'll notice that the Matcher is marked as transient. This is because not all Java objects are serializable, and must therefore be excluded from the objects that are serialized when your application is submitted. Otherwize, you may encounter a NotSerializableException.
<br>
<h4>parallel() doesn't function properly when I run in an EMBEDDED context. Is this a bug?</h4>
Currently, parallel() is not supported when running embedded. While your application will compile and run, no parallelism will actually occur. Another way of putting it is that when running embedded, any call to parallel() will result in the equivalent of calling parallel(1).
<script src="javascripts/jquery-2.1.4.js"></script>
<script src="javascripts/toc.min.js"></script>
<script>
$('.toc').toc({'selectors': 'h3,h4', //elements to use as headings
    'container': 'body', //element to find all selectors in
    'smoothScrolling': true, //enable or disable smooth scrolling on click
    'prefix': 'toc', //prefix for anchor tags and class names
    'onHighlight': function(el) {}, //called when a new section is highlighted 
    'highlightOnScroll': true, //add class to heading that is currently in focus
    'highlightOffset': 100, //offset to trigger the next headline
    'anchorName': function(i, heading, prefix) { //custom function for anchor name
        return prefix+i;
    },
    'headerText': function(i, heading, $heading) { //custom function building the header-item text
        return $heading.text();
    },
'itemClass': function(i, heading, $heading, prefix) { // custom function for item class
  return $heading[0].tagName.toLowerCase();
}});
</script>
</body>
</html>
